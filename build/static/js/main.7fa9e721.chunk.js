(this["webpackJsonpreact-material-dashboard"]=this["webpackJsonpreact-material-dashboard"]||[]).push([[0],{624:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(32),o=a.n(r),c=a(49);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(503);var s=a(33),l=a(713),d=a(81),u=a(431),h=Object(d.a)((function(){return Object(u.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"},formControl:{display:"block",width:"100 %",padding:".375rem .75rem",fontSize:"1rem",lineHeight:"1.5",color:"#495057",backgrounColor:"#fff",backgroundClip:"padding - box",border:"1px solid #ced4da",borderRadius:".25rem",transition:"border - color .15s ease -in -out, box - shadow .15s ease -in -out"}}})})),b=function(){return h(),null};var j=a(144),m=a(23),p=["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],g={h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}},x=a(436),f=Object(j.a)({palette:{background:{dark:"#F4F6F8",default:m.a.common.white,paper:m.a.common.white},primary:{main:m.a.indigo[500]},secondary:{main:m.a.indigo[500]},text:{primary:m.a.blueGrey[900],secondary:m.a.blueGrey[600]}},shadows:p,typography:g,coreEsES:x.a}),v=a(9),O=a(7),y=a(746),S=a(753),k=a(120),C=a(707),w=a(627),N=a(751),I=a(709),_=a(15),T=a(30),A=a(3),E=a(626),B=a(134),W=a(439),D=a(754),M=a(1),F=Object(d.a)((function(e){return{item:{display:"flex",paddingTop:0,paddingBottom:0},button:{color:e.palette.text.secondary,fontWeight:e.typography.fontWeightMedium,justifyContent:"flex-start",letterSpacing:0,padding:"10px 8px",textTransform:"none",width:"100%"},icon:{marginRight:e.spacing(1)},title:{marginRight:"auto"},active:{color:e.palette.primary.main,"& $title":{fontWeight:e.typography.fontWeightMedium},"& $icon":{color:e.palette.primary.main}}}})),R=function(e){var t=e.className,a=e.href,i=e.icon,r=e.title,o=Object(T.a)(e,["className","href","icon","title"]),s=F();return Object(n.useEffect)((function(){var e=Object(W.loadCSS)("https://use.fontawesome.com/releases/v5.14.0/css/all.css",document.querySelector("#font-awesome-css")||document.head.firstChild);return function(){e.parentNode.removeChild(e)}}),[]),Object(M.jsx)(E.a,Object(_.a)(Object(_.a)({className:Object(A.a)(s.item,t),disableGutters:!0},o),{},{children:Object(M.jsx)(B.a,{activeClassName:s.active,className:s.button,component:c.c,to:"/turnos"+a,startIcon:null!==i&&""!==i?Object(M.jsx)(D.a,{size:"20",children:i}):"",children:Object(M.jsx)("span",{className:s.title,children:r})})}))},L=Object(d.a)((function(){return{mobileDrawer:{width:256},desktopDrawer:{width:256,top:64,height:"calc(100% - 64px)"},avatar:{cursor:"pointer",width:64,height:64}}})),P=function(e){var t=e.onMobileClose,a=e.openMobile,i=e.items,r=e.user,o=L(),l=Object(s.f)();Object(n.useEffect)((function(){a&&t&&t()}),[l.pathname]);var d=Object(M.jsxs)(y.a,{height:"100%",display:"flex",flexDirection:"column",children:[Object(M.jsxs)(y.a,{alignItems:"center",display:"flex",flexDirection:"column",p:2,children:[Object(M.jsx)(S.a,{className:o.avatar,component:c.b,src:r.avatar,to:"/turnos/app/usuario?action=view&id="+r.id_user}),Object(M.jsx)(k.a,{className:o.name,color:"textPrimary",variant:"h5",children:r.name}),Object(M.jsx)(k.a,{color:"textSecondary",variant:"body2",children:r.jobTitle})]}),Object(M.jsx)(C.a,{}),Object(M.jsx)(y.a,{p:2,children:Object(M.jsx)(w.a,{children:i.map((function(e){return Object(M.jsx)(R,{href:e.href,title:e.title,icon:e.icon},e.title)}))})}),Object(M.jsx)(y.a,{flexGrow:1})]});return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(N.a,{lgUp:!0,children:Object(M.jsx)(I.a,{anchor:"left",classes:{paper:o.mobileDrawer},onClose:t,open:a,variant:"temporary",children:d})}),Object(M.jsx)(N.a,{mdDown:!0,children:Object(M.jsx)(I.a,{anchor:"left",classes:{paper:o.desktopDrawer},open:!0,variant:"persistent",children:d})})]})};P.defaultProps={onMobileClose:function(){},openMobile:!1};var U=P,V=a(711),q=a(712),z=a(135),H=a(444),Y=a.n(H),J=a(443),Q=a.n(J),G=function(e){return Object(M.jsx)("img",Object(_.a)({alt:"Logo",src:"/turnos/static/logo.png"},e))},$=Object(d.a)((function(){return{root:{},avatar:{width:60,height:60}}})),X=function(e){var t=e.className,a=e.onMobileNavOpen,n=Object(T.a)(e,["className","onMobileNavOpen"]),i=$();return Object(M.jsx)(V.a,Object(_.a)(Object(_.a)({className:Object(A.a)(i.root,t),elevation:0},n),{},{children:Object(M.jsxs)(q.a,{children:[Object(M.jsx)(c.b,{to:"/turnos/app/dashboard",children:Object(M.jsx)(G,{})}),Object(M.jsx)(y.a,{flexGrow:1}),Object(M.jsx)(N.a,{mdDown:!0,children:Object(M.jsx)(c.b,{to:"/turnos/app/logout",style:{textDecoration:"none",color:"white"},children:Object(M.jsx)(z.a,{color:"inherit",children:Object(M.jsx)(Q.a,{})})})}),Object(M.jsx)(N.a,{lgUp:!0,children:Object(M.jsx)(z.a,{color:"inherit",onClick:a,children:Object(M.jsx)(Y.a,{})})})]})}))},Z=a(31),K=a.n(Z),ee=a(39),te=a(10),ae=a(11),ne=a(16),ie=a.n(ne),re="http://queueapp.tumundoenjava.com:8080/Turnos",oe="user",ce="token",se=new(function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,[{key:"executeJwtAuthenticationService",value:function(e,t){return ie.a.post("".concat(re,"/authenticate"),{username:e,password:t})}},{key:"registerSuccessfulLoginForJwt",value:function(e,t){sessionStorage.setItem(oe,e),sessionStorage.setItem(ce,t),this.setupAxiosInterceptors(this.createJWTToken(t))}},{key:"createJWTToken",value:function(e){return"Bearer "+e}},{key:"getTokenUser",value:function(){var e=sessionStorage.getItem(ce);return null===e?"":e}},{key:"logout",value:function(){sessionStorage.removeItem(oe),localStorage.removeItem("originLoginExterno"),sessionStorage.removeItem("id_unidad"),sessionStorage.removeItem("user"),sessionStorage.removeItem("token"),sessionStorage.removeItem("ROLE"),sessionStorage.removeItem("EXP_DATE"),sessionStorage.removeItem("INST"),sessionStorage.removeItem("idUnidadRecurso")}},{key:"modifyUnidadRecurso",value:function(e,t){return ie.a.put("".concat(re,"/unidad_recurso/").concat(e),t,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}})}},{key:"isUserLoggedIn",value:function(){return null!==sessionStorage.getItem(oe)}},{key:"getLoggedInUserName",value:function(){var e=sessionStorage.getItem(oe);return null===e?"":e}},{key:"setupAxiosInterceptors",value:function(e){var t=this;ie.a.interceptors.request.use((function(a){return t.isUserLoggedIn()&&(a.headers.authorization=e),a}))}},{key:"getApiUrl",value:function(){return re}},{key:"whoami",value:function(){return ie.a.get("".concat(re,"/admin/user/whoami"))}},{key:"loadMenuListByRol",value:function(){return ie.a.get("".concat(re,"/admin/menurol/rol"))}}]),e}()),le=a(20),de=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:Object(O.a)({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},e.breakpoints.up("lg"),{paddingLeft:256}),contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"}}})),ue=function(){var e=de(),t=Object(n.useState)(!1),a=Object(v.a)(t,2),i=a[0],r=a[1],o=Object(n.useState)(null),c=Object(v.a)(o,2),l=c[0],d=c[1],u=Object(n.useState)([]),h=Object(v.a)(u,2),b=h[0],j=h[1];Object(n.useEffect)((function(){se.whoami().then((function(e){d(e.data)})).catch((function(e){console.error(e)})),se.loadMenuListByRol().then((function(e){j(m(e.data))})).catch((function(e){le.b.error("Error al cargar menus de usuario"),m([])}))}),[]);var m=function(e){try{var t=[];return e.map((function(e){return t.push({href:e.idMenu.url,icon:null!==e.idMenu.iconoMenu&&""!==e.idMenu.iconoMenu?e.idMenu.iconoMenu:"",title:e.idMenu.nombre})})),t.push({href:"/app/logout",icon:"logout",title:"Salir"}),t}catch(a){return[]}},p={avatar:"/static/images/avatars/default-avatar.png",jobTitle:null!=l?l.username+" ("+l.idRol.nombre+") ":"loading",name:null!=l?l.primerNombre+" "+l.primerApellido:"loading",id_user:null!=l?l.idUsuario:0};return Object(M.jsxs)("div",{className:e.root,children:[Object(M.jsx)(X,{onMobileNavOpen:function(){return r(!0)}}),Object(M.jsx)(U,{onMobileClose:function(){return r(!1)},openMobile:i,items:b,user:p}),Object(M.jsx)("div",{className:e.wrapper,children:Object(M.jsx)("div",{className:e.contentContainer,children:Object(M.jsx)("div",{className:e.content,children:Object(M.jsx)(s.b,{})})})})]})},he=Object(d.a)({root:{},toolbar:{height:64}}),be=function(e){var t=e.className,a=Object(T.a)(e,["className"]),n=he();return Object(M.jsx)(V.a,Object(_.a)(Object(_.a)({className:Object(A.a)(n.root,t),elevation:0},a),{},{children:Object(M.jsx)(q.a,{className:n.toolbar,children:Object(M.jsx)(c.b,{to:"/turnos",children:Object(M.jsx)(G,{style:{margin:10,height:"90%"}})})})}))},je=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.default,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:{display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"}}})),me=function(){var e=je();return Object(M.jsxs)("div",{className:e.root,children:[Object(M.jsx)(be,{}),Object(M.jsx)("div",{className:e.wrapper,children:Object(M.jsx)("div",{className:e.contentContainer,children:Object(M.jsx)("div",{className:e.content,children:Object(M.jsx)(s.b,{})})})})]})},pe=a(22),ge=a(21),xe=a(716),fe=a(445),ve=Object(n.forwardRef)((function(e,t){var a=e.children,n=e.title,i=void 0===n?"":n,r=Object(T.a)(e,["children","title"]);return Object(M.jsxs)("div",Object(_.a)(Object(_.a)({ref:t},r),{},{children:[Object(M.jsx)(fe.a,{children:Object(M.jsx)("title",{children:i})}),a]}))})),Oe=a(715),ye=a(87),Se=a(108),ke=a.n(Se),Ce=a(109),we=a.n(Ce),Ne={ID_ROL_ADMIN:1,ID_ROL_TECNICO:2},Ie=a(88),_e=a.n(Ie),Te=Object(d.a)((function(e){return{root:{},avatar:{marginRight:e.spacing(2)}}})),Ae=function(e){var t=e.className,a=(e.customers,e.encuestas),n=e.user,i=Object(T.a)(e,["className","customers","encuestas","user"]),r=Te(),o=[{field:"id",headerName:"No. Usuario",minWidth:100},{field:"nombre",headerName:"Nombre Usuario",minWidth:300,flex:1},{field:"username",headerName:"Username",minWidth:200},{field:"rol",headerName:"Rol",minWidth:200},{field:"fechaNacimiento",headerName:"Fecha Nacimiento",description:"Fecha de nacimiento del usuario",sortable:!1,minWidth:400,flex:.5,type:"dateTime"},{field:"button",headerName:"Accion",minWidth:200,disableClickEventBubbling:!0,flex:.5,renderCell:function(e){var t=function(){console.log(e.value),window.location="usuario?action=update&id="+e.value};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:function(){console.log(e.value),window.location="usuario?action=view&id="+e.value},children:Object(M.jsx)(ke.a,{})}),null!=n&&n.idRol.idRol===Ne.ID_ROL_ADMIN&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:t,children:Object(M.jsx)(we.a,{})}),Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:t,children:Object(M.jsx)(_e.a,{})})]})]})}}];return Object(M.jsx)(Oe.a,Object(_.a)(Object(_.a)({className:Object(A.a)(r.root,t)},i),{},{children:Object(M.jsx)("div",{style:{height:400,width:"100%"},children:Object(M.jsx)(ye.a,{rows:a,columns:o,pageSize:5,filterModel:{items:[{columnField:"nombre",operatorValue:"contains",value:""}]}})})}))},Ee=Object(d.a)((function(e){return{root:{},importButton:{marginRight:e.spacing(1)},exportButton:{marginRight:e.spacing(1)}}})),Be=function(){window.location="usuario?action=new"},We=function(e){var t=e.className,a=Object(T.a)(e,["className"]),n=Ee();return Object(M.jsx)("div",Object(_.a)(Object(_.a)({className:Object(A.a)(n.root,t)},a),{},{children:Object(M.jsx)(y.a,{display:"flex",justifyContent:"flex-end",children:Object(M.jsx)(B.a,{color:"primary",variant:"contained",onClick:Be,style:{marginTop:10},children:"Crear Usuario"})})}))},De=se.getApiUrl(),Me=function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,[{key:"findAll",value:function(){return ie.a.get("".concat(De,"/admin/user/"))}},{key:"findById",value:function(e){return ie.a.get("".concat(De,"/admin/user/").concat(e))}},{key:"save",value:function(e){return ie.a.post("".concat(De,"/admin/user/"),e)}},{key:"update",value:function(e,t){return ie.a.put("".concat(De,"/detalle/").concat(e),t)}},{key:"updateusuario",value:function(e,t){return ie.a.put("".concat(De,"/admin/user/").concat(e),t)}},{key:"whoami",value:function(){return ie.a.get("".concat(De,"/admin/user/whoami"))}}]),e}(),Fe=function(){var e=Object(ee.a)(K.a.mark((function e(t){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.a.get("".concat(De,"/admin/user/dui/").concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(ee.a)(K.a.mark((function e(t){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.a.get("".concat(De,"/admin/user/nit/").concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Le=new Me,Pe=a(62),Ue=a.n(Pe),Ve=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),qe=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).state={dataEncuesta:[],dataEncuestaFormated:[],user:null},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){this.loadAllEncuestas(),this.userDetail()}},{key:"userDetail",value:function(){var e=this;Le.whoami().then((function(t){e.setState({user:t.data})})).catch((function(e){console.error(e)}))}},{key:"loadAllEncuestas",value:function(){var e=this;Le.findAll().then((function(t){e.setState({dataEncuesta:t.data}),e.makeDataEncuesta(t.data)})).catch((function(e){console.error(e)}))}},{key:"makeDataEncuesta",value:function(e){var t=[];e.map((function(e){return t.push({nombre:e.primerNombre+" "+e.primerApellido,username:e.username,fechaNacimiento:Ue()(e.fechaNacimiento).format("DD/MM/YYYY"),id:e.idUsuario,rol:e.idRol.nombre,button:e.idUsuario})})),this.setState({dataEncuestaFormated:t})}},{key:"render",value:function(){return Object(M.jsx)(ve,{className:Ve.root,title:"Lista de Usuarios",children:Object(M.jsxs)(xe.a,{maxWidth:!1,children:[Object(M.jsx)(We,{}),Object(M.jsx)(y.a,{mt:3,children:Object(M.jsx)(Ae,{encuestas:this.state.dataEncuestaFormated,user:this.state.user})})]})})}}]),a}(n.Component),ze=a(718),He=a(717),Ye=a(451),Je=a.n(Ye),Qe=Object(d.a)((function(e){return{root:{height:"100%"},avatar:{backgroundColor:m.a.red[600],height:56,width:56},differenceIcon:{color:m.a.red[900]},differenceValue:{color:m.a.red[900],marginRight:e.spacing(1)}}})),Ge=function(e){var t=e.className,a=e.data,n=Object(T.a)(e,["className","data"]),i=Qe();return Object(M.jsx)(Oe.a,Object(_.a)(Object(_.a)({className:Object(A.a)(i.root,t)},n),{},{children:Object(M.jsx)(He.a,{children:Object(M.jsxs)(ze.a,{container:!0,justify:"space-between",spacing:1,children:[Object(M.jsxs)(ze.a,{item:!0,children:[Object(M.jsx)(k.a,{color:"textSecondary",gutterBottom:!0,variant:"subtitle2",children:"TURNOS ATENDIDOS LOS \xdaLTIMOS 30 D\xcdAS"}),Object(M.jsx)(k.a,{color:"textPrimary",variant:"h3",children:null!==a?a.turnos_last_month:0})]}),Object(M.jsx)(ze.a,{item:!0,children:Object(M.jsx)(S.a,{className:i.avatar,children:Object(M.jsx)(Je.a,{})})})]})})}))},$e=a(56),Xe=a(316),Ze=a(124),Ke=a(755),et=a(768),tt=a(756),at=a(757),nt=a(769),it=a(748),rt=Object(it.a)((function(){return{root:{height:"100%"}}}));$e.d.register($e.a,$e.l,$e.f);var ot={labels:["Red","Blue","Yellow","Green","Purple","Orange"],datasets:[{label:"# of Votes",data:[12,19,3,5,2,3],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},ct=function(e){var t=e.className,a=Object(T.a)(e,["className"]),n=rt(),i=Object(Ze.a)(),r={animation:!1,cutoutPercentage:80,layout:{padding:0},legend:{display:!1},maintainAspectRatio:!1,responsive:!0,tooltips:{backgroundColor:i.palette.background.default,bodyFontColor:i.palette.text.secondary,borderColor:i.palette.divider,borderWidth:1,enabled:!0,footerFontColor:i.palette.text.secondary,intersect:!1,mode:"index",titleFontColor:i.palette.text.primary}};return Object(M.jsxs)(Ke.a,Object(_.a)(Object(_.a)({className:Object(A.a)(n.root,t)},a),{},{children:[Object(M.jsx)(et.a,{title:"Turnos atendidos por categor\xeda"}),Object(M.jsx)(tt.a,{}),Object(M.jsx)(at.a,{children:Object(M.jsx)(nt.a,{height:300,position:"relative",children:Object(M.jsx)(Xe.a,{data:ot,options:r})})})]}))},st=a(452),lt=a.n(st),dt=Object(d.a)((function(){return{root:{height:"100%"},avatar:{backgroundColor:m.a.orange[600],height:56,width:56}}})),ut=function(e){var t=e.className,a=e.data,n=Object(T.a)(e,["className","data"]),i=dt();return Object(M.jsx)(Oe.a,Object(_.a)(Object(_.a)({className:Object(A.a)(i.root,t)},n),{},{children:Object(M.jsx)(He.a,{children:Object(M.jsxs)(ze.a,{container:!0,justify:"space-between",spacing:1,children:[Object(M.jsxs)(ze.a,{item:!0,children:[Object(M.jsx)(k.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"TURNOS RELLAMADOS HOY"}),Object(M.jsx)(k.a,{color:"textPrimary",variant:"h3",children:null!==a?a.turnos_con_rellamados_hoy:0})]}),Object(M.jsx)(ze.a,{item:!0,children:Object(M.jsx)(S.a,{className:i.avatar,children:Object(M.jsx)(lt.a,{})})})]})})}))},ht=a(453),bt=a.n(ht),jt=Object(d.a)((function(e){return{root:{height:"100%"},avatar:{backgroundColor:m.a.green[600],height:56,width:56},differenceIcon:{color:m.a.green[900]},differenceValue:{color:m.a.green[900],marginRight:e.spacing(1)}}})),mt=function(e){var t=e.className,a=e.data,n=Object(T.a)(e,["className","data"]),i=jt();return Object(M.jsx)(Oe.a,Object(_.a)(Object(_.a)({className:Object(A.a)(i.root,t)},n),{},{children:Object(M.jsx)(He.a,{children:Object(M.jsxs)(ze.a,{container:!0,justify:"space-between",spacing:1,children:[Object(M.jsxs)(ze.a,{item:!0,children:[Object(M.jsx)(k.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"TURNOS ATENDIDOS HOY"}),Object(M.jsx)(k.a,{color:"textPrimary",variant:"h3",children:null!==a?a.turnos_today:0})]}),Object(M.jsx)(ze.a,{item:!0,children:Object(M.jsx)(S.a,{className:i.avatar,children:Object(M.jsx)(bt.a,{})})})]})})}))},pt=a(454),gt=a.n(pt),xt=Object(d.a)((function(){return{root:{height:"100%"},avatar:{backgroundColor:m.a.indigo[600],height:56,width:56}}})),ft=function(e){var t=e.className,a=e.data,n=Object(T.a)(e,["className","data"]),i=xt();return Object(M.jsx)(Oe.a,Object(_.a)(Object(_.a)({className:Object(A.a)(i.root,t)},n),{},{children:Object(M.jsx)(He.a,{children:Object(M.jsxs)(ze.a,{container:!0,justify:"space-between",spacing:3,children:[Object(M.jsxs)(ze.a,{item:!0,children:[Object(M.jsx)(k.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"TURNOS QUE NO ACUDIERON"}),Object(M.jsx)(k.a,{color:"textPrimary",variant:"h3",children:null!==a?a.turno_no_acude:0})]}),Object(M.jsx)(ze.a,{item:!0,children:Object(M.jsx)(S.a,{className:i.avatar,children:Object(M.jsx)(gt.a,{})})})]})})}))},vt=se.getApiUrl(),Ot=new(function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,[{key:"loadDashboardInfo",value:function(){return ie.a.get("".concat(vt,"/turno/dashboard"))}},{key:"loadDashboardInfo2",value:function(){return ie.a.get("".concat(vt,"/encuesta/dashboard2"))}},{key:"whoami",value:function(){return ie.a.get("".concat(vt,"/admin/user/whoami"))}}]),e}()),yt=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),St=function(){var e=yt(),t=Object(n.useState)(null),a=Object(v.a)(t,2),i=a[0],r=a[1];return Object(n.useEffect)((function(){Ot.loadDashboardInfo().then((function(e){r(e.data)})).catch((function(e){console.error(e)}))}),[]),Object(M.jsx)(ve,{className:e.root,title:"Dashboard",children:Object(M.jsx)(xe.a,{maxWidth:!1,children:Object(M.jsxs)(ze.a,{container:!0,spacing:3,children:[Object(M.jsx)(ze.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(M.jsx)(Ge,{data:i})}),Object(M.jsx)(ze.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(M.jsx)(mt,{data:i})}),Object(M.jsx)(ze.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(M.jsx)(ut,{data:i})}),Object(M.jsx)(ze.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(M.jsx)(ft,{data:i})}),Object(M.jsx)(ze.a,{item:!0,lg:8,md:12,xl:9,xs:12,children:Object(M.jsx)(ct,{})})]})})})},kt=a(83),Ct=a(253),wt=a(475),Nt=a(720),It=new(function(){function e(){Object(te.a)(this,e),this.cleanFormExceptThis=function(){var e=Object(ee.a)(K.a.mark((function e(t,a){var n,i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=document.getElementById(t),i=0;i<n.elements.length;i++)console.log(n.elements[i].type),"text"===n.elements[i].type&&n.elements[i].name!==a&&(n.elements[i].value="");return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}return Object(ae.a)(e,[{key:"isNull",value:function(e){return this.isNull2(e,e.name)}},{key:"isNull2",value:function(e,t){return"select-one"!==e.type||""!==e.value&&"0"!==e.value&&"-1"!==e.value?""===e.value?(this.setInvalid(e,"Este campo no puede quedar vac\xedo."+(null===t?"":" ("+t+")")),!0):(this.setValid(e),!1):(this.setInvalid(e,"Este campo no puede quedar vac\xedo."+(null===t?"":" ("+t+")")),!0)}},{key:"setValid",value:function(e){e&&(e.style&&("mdt"===e.className||"mdtR"===e.className?e.style.background="none repeat-x scroll center bottom #fffff9":e.style.background="none repeat-x scroll center bottom #FFFFFF",e.style.borderColor="#28a745",e.style.backgroundImage=""),document.getElementById(e.name+"_img")&&(document.getElementById(e.name+"_img").src="images/validated.gif"),document.getElementById(e.name+"_span")&&(document.getElementById(e.name+"_span").style.display="none"),document.getElementById(e.name)&&(document.getElementById(e.name).style.borderColor="#28a745"))}},{key:"setInvalid",value:function(e,t){void 0!==t&&""!==t||(t="Campo requerido"),document.getElementById(e.name+"_img")&&(document.getElementById(e.name+"_img").src="images/exclamation.gif"),document.getElementById(e.name+"_span")?(document.getElementById(e.name+"_span").innerHTML=t,document.getElementById(e.name+"_span").style.display="block",document.getElementById(e.name+"_span").style.fontSize="80%",document.getElementById(e.name+"_span").style.marginTop=".25rem",document.getElementById(e.name+"_span").style.color="#dc3545"):alert(t),e.style&&("mdt"===e.className||"mdtR"===e.className?e.style.background="none repeat-x scroll center bottom #ffff99":(e.style.background="none repeat-x scroll center bottom #FFFFFF",e.style.backgroundImage="url(images/invalid_line.gif)",e.style.borderColor="#dc3545",document.getElementById(e.name)&&(document.getElementById(e.name).style.borderColor="#dc3545")))}},{key:"setInvalidPrimeReact",value:function(e,t){void 0!==t&&""!==t||(t="Campo requerido"),document.getElementById(e.name+"_span")&&(document.getElementById(e.name+"_span").innerHTML=t,document.getElementById(e.name+"_span").style.display="block",document.getElementById(e.name+"_span").style.fontSize="80%",document.getElementById(e.name+"_span").style.marginTop=".25rem",document.getElementById(e.name+"_span").style.color="#dc3545"),document.getElementById(e.name)&&document.getElementById(e.name).classList.add("p-invalid")}},{key:"setValidPrimeReact",value:function(e,t){document.getElementById(e.name)&&(document.getElementById(e.name).classList.remove("p-invalid"),document.getElementById(e.name).style.borderColor="#28a745"),document.getElementById(e.name+"_span")&&(document.getElementById(e.name+"_span").style.display="none")}},{key:"isNumberPos",value:function(e){var t=!0;return""!==e.value&&0===e.value.indexOf(".")&&(e.value="0"+e.value),""===e.value?(this.setInvalid(e,"Este campo tiene que contener un n\xfamero POSITIVO."),e.value="0",t=!1):this.check_only_digits(e)||(""===e.value&&(e.value="0"),t=!1),(""!==e.value&&isNaN(e.value)||e.value.indexOf(".")!==e.value.lastIndexOf("."))&&(this.setInvalid(e,"N\xfamero no v\xe1lido. Verif\xedquelo."),e.value="0",t=!1),t&&this.setValid(e),t}},{key:"check_only_digits",value:function(e){return this.check_entry(e,"0123456789.","Solo n\xfameros positivos son aceptados. No espacio, subraya, etc...")}},{key:"check_entry",value:function(e,t,a){for(var n="yes",i="",r=0;r<e.value.length;r++)i=""+e.value.substring(r,r+1),-1===t.indexOf(i)&&(n="no");if("no"===n){i="",e.value=e.value.toUpperCase();for(var o=0;o<e.value.length;o++)"-1"===t.indexOf(e.value.charAt(o))||(i+=e.value.charAt(o));return e.value=i,this.setInvalid(e,a+" Valor modificado para hacer cumplir la regla. Verif\xedquelo!"),!1}return this.setValid(e),!0}},{key:"check_Hr",value:function(e){if(this.check_entry(e,"0123456789:","El formato de la hora no esta correcto. El formato es hh:mm. Valor modificado para hacer cumplir la regla. VERIFICALO!"),e.value.length<1||e.value.length>5||e.value.length>2&&-1===e.value.indexOf(":")||e.value.length>2&&e.value.length<5)return this.setInvalid(e,"La hora es obligatoria. El formato es hh:mm"),!1;var t=e.value.substring(0,1);e.value.length>1&&(t=e.value.substring(0,2));var a="0";return e.value.length<1&&(a="NA"),5===e.value.length&&(a=e.value.substring(3,5)),isNaN(t)||isNaN(a)||t>23||a>59?(this.setInvalid(e,"La hora es obligatoria. El formato es hh:mm"),!1):(this.setValid(e),!0)}},{key:"parseJwt",value:function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}},{key:"getQueryVariable",value:function(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]===e)return n[1]}return!1}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"validateForm",value:function(e){for(var t=document.getElementById(e),a=0;a<t.elements.length;a++)console.log(t.elements[a].required),t.elements[a].required&&(""===t.elements[a].value?(console.error("deberia llenarse: "+t.elements[a].name),this.setInvalidPrimeReact(t.elements[a])):this.setValidPrimeReact(t.elements[a]))}}]),e}());se.setupAxiosInterceptors(se.createJWTToken(se.getTokenUser()));var _t=function(){return!!se.isUserLoggedIn()},Tt=function(){return sessionStorage.getItem("station")},At=Object(n.createContext)();At.displayName="ContextAuth";var Et={Provider:function(e){var t=e.children,a=Object(n.useState)(_t),i=Object(v.a)(a,2),r=i[0],o=i[1],c=Object(n.useState)(Tt),s=Object(v.a)(c,2),l=s[0],d=s[1],u={isAuth:r,activateAuth:function(e){o(!0);var t=It.parseJwt(e.data.token).sub;se.registerSuccessfulLoginForJwt(t,e.data.token),se.setupAxiosInterceptors(se.createJWTToken(e.data.token))},stationAttended:l,selectStationToAttend:function(e){d(JSON.stringify(e)),sessionStorage.setItem("station",JSON.stringify(e))},destroyStationAttended:function(){sessionStorage.removeItem("station"),d(null)}};return Object(M.jsx)(At.Provider,{value:u,children:t})},Consumer:At.Consumer},Bt=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),Wt=function(){var e=Bt(),t=Object(n.useState)(!1),a=Object(v.a)(t,2),i=a[0],r=a[1],o=Object(n.useState)(!1),c=Object(v.a)(o,2),s=c[0],l=c[1],d=function(){r(!1)};return Object(M.jsx)(Et.Consumer,{children:function(t){var a=t.activateAuth;return Object(M.jsxs)(ve,{className:e.root,title:"Login QueueApp",children:[Object(M.jsx)(y.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",children:Object(M.jsx)(xe.a,{maxWidth:"sm",children:Object(M.jsx)(Ct.a,{initialValues:{username:"",password:""},validationSchema:kt.b().shape({username:kt.c().max(255).required("Usuario es requerido"),password:kt.c().max(255).required("Contrase\xf1a es requerida")}),onSubmit:function(e,t){se.executeJwtAuthenticationService(e.username,e.password).then((function(e){a(e),window.location="/turnos/app/dashboard",!1})).catch((function(e){var t;t=String(e).indexOf("401")>0?String(e.response.data.message):String(e),l(t),r(!0),!1}))},children:function(e){var t=e.errors,a=e.handleBlur,n=e.handleChange,i=e.handleSubmit,r=e.isSubmitionCompleted,o=e.touched,c=e.values;return Object(M.jsxs)("form",{onSubmit:i,children:[Object(M.jsxs)(y.a,{mb:3,children:[Object(M.jsx)(k.a,{color:"textPrimary",variant:"h2",children:"Iniciar Sesi\xf3n"}),Object(M.jsx)(k.a,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Ingresar a QueueApp"})]}),Object(M.jsx)(wt.a,{error:Boolean(o.username&&t.username),fullWidth:!0,helperText:o.username&&t.username,label:"Usuario",margin:"normal",name:"username",onBlur:a,onChange:n,type:"text",value:c.username.trim(),variant:"outlined"}),Object(M.jsx)(wt.a,{error:Boolean(o.password&&t.password),fullWidth:!0,helperText:o.password&&t.password,label:"Contrase\xf1a",margin:"normal",name:"password",onBlur:a,onChange:n,type:"password",value:c.password.trim(),variant:"outlined"}),Object(M.jsx)(y.a,{my:2,children:Object(M.jsx)(B.a,{color:"primary",disabled:r,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Ingresar"})})]})}})})}),Object(M.jsx)(Nt.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:i,onClose:d,variant:"error",ContentProps:{"aria-describedby":"message-id"},message:Object(M.jsx)("span",{id:"message-id",children:s})})]})}})},Dt=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},image:{marginTop:50,display:"inline-block",maxWidth:"100%",width:560}}})),Mt=function(){var e=Dt();return Object(M.jsx)(ve,{className:e.root,title:"404",children:Object(M.jsx)(y.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",children:Object(M.jsxs)(xe.a,{maxWidth:"md",children:[Object(M.jsx)(k.a,{align:"center",color:"textPrimary",variant:"h1",children:"404: The page you are looking for isn\u2019t here"}),Object(M.jsx)(k.a,{align:"center",color:"textPrimary",variant:"subtitle2",children:"You either tried some shady route or you came here by mistake. Whichever it is, try using the navigation"}),Object(M.jsx)(y.a,{textAlign:"center",children:Object(M.jsx)("img",{alt:"Under development",className:e.image,src:"/turnos/static/images/undraw_page_not_found_su7k.svg"})}),Object(M.jsx)(y.a,{textAlign:"center",children:Object(M.jsx)(B.a,{variant:"outlined",color:"primary",onClick:function(e){window.location="/turnos/app/dashboard"},children:"Regresar"})})]})})})},Ft=a(478),Rt=a(721),Lt=a(635),Pt=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),Ut=function(){var e=Pt(),t=Object(s.g)();return Object(M.jsx)(ve,{className:e.root,title:"Register",children:Object(M.jsx)(y.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",children:Object(M.jsx)(xe.a,{maxWidth:"sm",children:Object(M.jsx)(Ct.a,{initialValues:{username:"",firstName:"",lastName:"",password:"",policy:!1},validationSchema:kt.b().shape({username:kt.c().username("Must be a valid username").max(255).required("Username is required"),firstName:kt.c().max(255).required("First name is required"),lastName:kt.c().max(255).required("Last name is required"),password:kt.c().max(255).required("password is required"),policy:kt.a().oneOf([!0],"This field must be checked")}),onSubmit:function(){t("/app/dashboard",{replace:!0})},children:function(e){var t=e.errors,a=e.handleBlur,n=e.handleChange,i=e.handleSubmit,r=e.isSubmitting,o=e.touched,s=e.values;return Object(M.jsxs)("form",{onSubmit:i,children:[Object(M.jsxs)(y.a,{mb:3,children:[Object(M.jsx)(k.a,{color:"textPrimary",variant:"h2",children:"Create new account"}),Object(M.jsx)(k.a,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Use your username to create new account"})]}),Object(M.jsx)(wt.a,{error:Boolean(o.firstName&&t.firstName),fullWidth:!0,helperText:o.firstName&&t.firstName,label:"First name",margin:"normal",name:"firstName",onBlur:a,onChange:n,value:s.firstName,variant:"outlined"}),Object(M.jsx)(wt.a,{error:Boolean(o.lastName&&t.lastName),fullWidth:!0,helperText:o.lastName&&t.lastName,label:"Last name",margin:"normal",name:"lastName",onBlur:a,onChange:n,value:s.lastName,variant:"outlined"}),Object(M.jsx)(wt.a,{error:Boolean(o.username&&t.username),fullWidth:!0,helperText:o.username&&t.username,label:"Username Address",margin:"normal",name:"username",onBlur:a,onChange:n,type:"username",value:s.username,variant:"outlined"}),Object(M.jsx)(wt.a,{error:Boolean(o.password&&t.password),fullWidth:!0,helperText:o.password&&t.password,label:"Password",margin:"normal",name:"password",onBlur:a,onChange:n,type:"password",value:s.password,variant:"outlined"}),Object(M.jsxs)(y.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(M.jsx)(Ft.a,{checked:s.policy,name:"policy",onChange:n}),Object(M.jsxs)(k.a,{color:"textSecondary",variant:"body1",children:["I have read the"," ",Object(M.jsx)(Rt.a,{color:"primary",component:c.b,to:"#",underline:"always",variant:"h6",children:"Terms and Conditions"})]})]}),Boolean(o.policy&&t.policy)&&Object(M.jsx)(Lt.a,{error:!0,children:t.policy}),Object(M.jsx)(y.a,{my:2,children:Object(M.jsx)(B.a,{color:"primary",disabled:r,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Sign up now"})}),Object(M.jsxs)(k.a,{color:"textSecondary",variant:"body1",children:["Have an account?"," ",Object(M.jsx)(Rt.a,{component:c.b,to:"/login",variant:"h6",children:"Sign in"})]})]})}})})})})},Vt=a(458),qt=a.n(Vt),zt=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(){return Object(te.a)(this,a),t.apply(this,arguments)}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){se.logout(),window.location="/turnos/login"}},{key:"render",value:function(){return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:"container",style:{textAlign:"center",marginTop:50},children:[Object(M.jsx)("h1",{children:"Estas saliendo de la aplicacion de encuesta"}),Object(M.jsx)("p",{children:"Gracias por usar nuestra aplicaci\xf3n. "}),Object(M.jsx)(qt.a,{fontSize:"large"})]})})}}]),a}(n.Component),Ht=Object(d.a)((function(){return{root:{},avatar:{height:100,width:100}}})),Yt=function(e){var t=e.className,a=e.user,n=Object(T.a)(e,["className","user"]),i=Ht();return Object(M.jsxs)(Oe.a,Object(_.a)(Object(_.a)({className:Object(A.a)(i.root,t)},n),{},{children:[Object(M.jsx)(He.a,{children:Object(M.jsxs)(y.a,{alignItems:"center",display:"flex",flexDirection:"column",children:[Object(M.jsx)(S.a,{className:i.avatar,src:a.avatar}),Object(M.jsx)(k.a,{color:"textPrimary",gutterBottom:!0,variant:"h3",children:a.name}),Object(M.jsxs)(k.a,{color:"textPrimary",gutterBottom:!0,variant:"h5",children:["Usuario(Rol): ",a.jobTitle]}),Object(M.jsx)(k.a,{color:"textSecondary",variant:"body1",children:"".concat(a.city," / ").concat(a.country)}),Object(M.jsx)(k.a,{className:i.dateText,color:"textSecondary",variant:"body1",children:"".concat(Ue()().format("hh:mm A")," ").concat(a.timezone)})]})}),Object(M.jsx)(C.a,{})]}))},Jt=a(732),Qt=a(722),Gt=a(731),$t=a(724),Xt=a(725),Zt=a(723),Kt=se.getApiUrl(),ea=new(function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,[{key:"loadAuditByIdPedido",value:function(e){return ie.a.get("".concat(Kt,"/auditoria/").concat(e))}},{key:"whoami",value:function(){return ie.a.get("".concat(Kt,"/usuario/whoami"))}}]),e}()),ta=a(727),aa=a(730),na=a(714),ia=a(726),ra=a(728),oa=a(729),ca=a(121),sa=Object(d.a)({table:{minWidth:650}});function la(e){var t=sa(),a=i.a.useState(!1),r=Object(v.a)(a,2),o=r[0],c=r[1],s=i.a.useState([]),l=Object(v.a)(s,2),d=l[0],u=l[1],h=function(){c(!1)},b=function(){ea.loadAuditByIdPedido(e.clave).then((function(e){u(e.data)})).catch((function(e){console.error(e)})),console.log(ea.id)};return Object(n.useEffect)((function(){}),[]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(B.a,{variant:"outlined",color:"primary",style:{marginLeft:5},onClick:function(){c(!0),b()},startIcon:Object(M.jsx)(_e.a,{}),children:"Hist\xf3rico"}),Object(M.jsxs)(Qt.a,{open:o,onClose:h,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"lg",children:[Object(M.jsxs)(Zt.a,{id:"form-dialog-title",children:["Hist\xf3rico del registro No. ",e.id]}),Object(M.jsx)($t.a,{children:Object(M.jsx)(Xt.a,{children:Object(M.jsx)(ia.a,{component:ca.a,children:Object(M.jsxs)(ta.a,{className:t.table,"aria-label":"a dense table",children:[Object(M.jsx)(ra.a,{children:Object(M.jsxs)(oa.a,{children:[Object(M.jsx)(na.a,{children:"Fecha"}),Object(M.jsx)(na.a,{align:"left",children:"Usuario"}),Object(M.jsx)(na.a,{align:"left",children:"Acci\xf3n"}),Object(M.jsx)(na.a,{align:"left",children:"Valor anterior"}),Object(M.jsx)(na.a,{align:"left",children:"Nuevo valor"})]})}),Object(M.jsx)(aa.a,{children:d.map((function(e){return Object(M.jsxs)(oa.a,{children:[Object(M.jsx)(na.a,{component:"th",scope:"row",children:Ue()(e.fecha).format("DD/MM/yyyy hh:mm:ss")}),Object(M.jsx)(na.a,{align:"left",children:e.last_user}),Object(M.jsx)(na.a,{align:"left",children:e.comentario}),Object(M.jsx)(na.a,{align:"left",children:e.old_value}),Object(M.jsx)(na.a,{align:"left",children:e.new_value})]},e.id)}))})]})})})}),Object(M.jsx)(Gt.a,{children:Object(M.jsx)(B.a,{onClick:h,color:"primary",children:"Cerrar"})})]})]})}var da=a(734),ua=a(733),ha=a(745),ba=a(198),ja=a.n(ba),ma=(a(184),It.getQueryVariable("action")),pa=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).useStyles=Object(d.a)((function(){return{root:{}}})),n.useStyles=Object(d.a)((function(e){return{root:{backgroundColor:"black",minHeight:"20px",paddingBottom:e.spacing(3),paddingTop:e.spacing(3),paddingLeft:10}}})),n.state={id_usuario:"",nombre:"",apellido:"",segundo_nombre:"",segundo_apellido:"",username:"",password:"",id_rol:2,activo:!0,states:[{value:1,label:"Administrador"},{value:2,label:"Atenci\xf3n"}],sexos:[{value:"M",label:"M"},{value:"F",label:"F"}],sexo:"",email:"",dui:"",nit:"",celular:"",telefono:"",estados:[{value:!0,label:"Activo"},{value:!1,label:"Inactivo"}],e_nombre:!1,e_nombre_str:"",e_apellido:!1,e_apellido_str:"",e_username:!1,e_password:!1,e_mail:!1,e_estado:!1,e_sexo:!1,e_dui:!1,sucursales:[{value:1,label:"Central"},{value:2,label:"Santa Tecla"}],id_sucursal:1,fecha_nacimiento:new Date,locale:"es",msj:"",openAlert:!1,severity:"info",redirect:!1},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){if("view"===ma||"update"===ma){var e=It.getQueryVariable("id");this.loadUserById(e),this.setState({id_usuario:e})}}},{key:"loadUserById",value:function(e){var t=this;Le.findById(e).then((function(e){var a=e.data;t.setState({nombre:a.primerNombre,segundo_nombre:a.segundoNombre,apellido:a.primerApellido,segundo_apellido:a.segundoApellido,username:a.username,password:a.password,id_rol:a.idRol.idRol,activo:a.activo,id_sucursal:a.idSucursal.idSucursal,sexo:a.sexo,email:a.email,dui:a.dui,nit:a.nit,celular:a.celular,telefono:a.telefono})})).catch((function(e){console.error(e)}))}},{key:"handleChange",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"onChangeDui",value:function(){var e=Object(ee.a)(K.a.mark((function e(t){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=String(t.target.value)).endsWith("_")&&!a.endsWith("-")){e.next=5;break}this.setState({e_dui:!0,e_dui_msj:"DUI incompleto"}),e.next=17;break;case 5:if(this.setState({e_dui:!1}),e.t0=""!==a,!e.t0){e.next=11;break}return e.next=10,this.validateDui(a);case 10:e.t0=e.sent;case 11:if(!e.t0){e.next=16;break}le.b.warn("Ya existe un usuario con este n\xfamero de DUI"),this.setState({e_dui:!0,e_dui_msj:"Usuario duplicado"}),e.next=17;break;case 16:this.setState({e_dui:!1});case 17:this.setState({dui:a});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onChangeNit",value:function(){var e=Object(ee.a)(K.a.mark((function e(t){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=String(t.target.value)).endsWith("_")&&!a.endsWith("-")){e.next=5;break}this.setState({e_nit:!0,e_nit_msj:"NIT incompleto"}),e.next=16;break;case 5:if(e.t0=""!==a,!e.t0){e.next=10;break}return e.next=9,this.validateNit(a);case 9:e.t0=e.sent;case 10:if(!e.t0){e.next=15;break}le.b.warn("Ya existe un usuario con este n\xfamero de NIT"),this.setState({e_nit:!0,e_nit_msj:"Usuario duplicado"}),e.next=16;break;case 15:this.setState({e_nit:!1});case 16:this.setState({nit:a});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateDui",value:function(){var e=Object(ee.a)(K.a.mark((function e(t){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t);case 2:if(void 0===(a=e.sent).status){e.next=11;break}if(parseInt(this.state.id_usuario)===parseInt(a.data.idUsuario)){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateNit",value:function(){var e=Object(ee.a)(K.a.mark((function e(t){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:if(void 0===(a=e.sent).status){e.next=11;break}if(parseInt(this.state.id_usuario)===parseInt(a.data.idUsuario)){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChangeMail",value:function(e){var t;/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.target.value)?this.setState((t={},Object(O.a)(t,e.target.name,e.target.value),Object(O.a)(t,"e_mail",!1),t)):this.setState({e_mail:!0});this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(ee.a)(K.a.mark((function e(t){var a,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==this.state.nombre){e.next=6;break}le.b.warn("Nombre Usuario"),this.setState({e_nombre:!0}),e.next=54;break;case 6:if(""!==this.state.apellido){e.next=11;break}le.b.warn("Apellido"),this.setState({e_apellido:!0}),e.next=54;break;case 11:if(""!==this.state.username){e.next=16;break}le.b.warn("Username"),this.setState({e_username:!0}),e.next=54;break;case 16:if(""!==this.state.password){e.next=21;break}le.b.warn("Contrase\xf1a"),this.setState({e_password:!0}),e.next=54;break;case 21:if(""!==this.state.activo){e.next=26;break}le.b.warn("Estado"),this.setState({e_estado:!0}),e.next=54;break;case 26:if(""!==this.state.sexo){e.next=31;break}le.b.warn("Sexo"),this.setState({e_sexo:!0}),e.next=54;break;case 31:if(null===this.state.dui||!this.state.dui.endsWith("-")&&!this.state.dui.endsWith("_")){e.next=35;break}le.b.warn("N\xfamero DUI incompleto"),e.next=54;break;case 35:if(null===this.state.nit||!this.state.nit.endsWith("-")&&!this.state.nit.endsWith("_")){e.next=39;break}le.b.warn("N\xfamero NIT incompleto"),e.next=54;break;case 39:return e.next=41,this.validateDui(this.state.dui);case 41:if(!e.sent){e.next=45;break}le.b.warn("Ya existe un usuario con el DUI "+this.state.dui),e.next=54;break;case 45:return e.next=47,this.validateNit(this.state.nit);case 47:if(!e.sent){e.next=51;break}le.b.warn("Ya existe un usuario con el NIT "+this.state.nit),e.next=54;break;case 51:a={primerNombre:this.state.nombre,segundoNombre:this.state.segundo_nombre,primerApellido:this.state.apellido,username:this.state.username,password:this.state.password,idRol:{idRol:this.state.id_rol},idSucursal:{idSucursal:parseInt(this.state.id_sucursal)},activo:this.state.activo,sexo:this.state.sexo,email:this.state.email,dui:""===String(this.state.dui)?null:this.state.dui,nit:""===this.state.nit?null:this.state.nit,celular:this.state.celular,telefono:this.state.telefono,fechaNacimiento:this.state.fecha_nacimiento},"update"===ma&&(n=It.getQueryVariable("id"),a.idUsuario=n),this.save(a);case 54:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(e){var t=this;Le.save(e).then((function(e){le.b.success("Creado correctamente!"),t.setState({redirect:!0}),window.location="/turnos/app/users"})).catch((function(e){le.b.error(String(e).substring(0,400))}))}},{key:"openModalAudit",value:function(){this.setState({openModalAudit:!0})}},{key:"render",value:function(){var e=this;return Object(M.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:this.handleSubmit.bind(this),children:Object(M.jsxs)(Oe.a,{children:[Object(M.jsx)(Jt.a,{subheader:"Detalles del usuario",title:"Usuario"}),Object(M.jsx)(C.a,{}),Object(M.jsx)(He.a,{children:Object(M.jsxs)(ze.a,{container:!0,spacing:3,children:[Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,helperText:this.state.e_nombre?"Ingresa el nombre del usuaro, por favor":"",label:"Primer nombre",name:"nombre",onChange:this.handleChange.bind(this),required:!0,value:this.state.nombre,variant:"outlined",error:this.state.e_nombre})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Segundo nombre",name:"segundo_nombre",onChange:this.handleChange.bind(this),value:this.state.segundo_nombre,variant:"outlined"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Primer apellido",name:"apellido",onChange:this.handleChange.bind(this),required:!0,value:this.state.apellido,variant:"outlined",helperText:this.state.e_apellido?"Ingresa el Apellido del usuaro, por favor":"",error:this.state.e_apellido})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Segundo apellido",name:"segundo_apellido",onChange:this.handleChange.bind(this),value:this.state.segundo_apellido,variant:"outlined"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Username",name:"username",onChange:this.handleChange.bind(this),required:!0,value:this.state.username,variant:"outlined",helperText:this.state.e_username?"Ingresa el Username del usuaro, por favor":"",error:this.state.e_username})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Contrase\xf1a",name:"password",onChange:this.handleChange.bind(this),type:"password",value:this.state.password,variant:"outlined",helperText:this.state.e_password?"Ingresa la Contrase\xf1a del usuaro, por favor":"",error:this.state.e_password})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(ua.b,{dateAdapter:da.a,locale:"es",style:{width:"100%"},children:Object(M.jsx)(ha.a,{label:"Fecha de nacimiento",fullWidth:!0,disableFuture:!0,value:this.state.fecha_nacimiento,onChange:function(t){e.setState({fecha_nacimiento:t})},renderInput:function(e){return Object(M.jsx)(wt.a,Object(_.a)({},e))}})})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Estado",name:"activo",onChange:this.handleChange.bind(this),required:!0,select:!0,SelectProps:{native:!0},value:this.state.activo,variant:"outlined",helperText:this.state.e_username?"Estado del usuario no puede ser vac\xedo":"",error:this.state.e_estado,children:this.state.estados.map((function(e){return Object(M.jsx)("option",{value:e.value,children:e.label},e.value)}))})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsxs)(wt.a,{fullWidth:!0,label:"Sexo",name:"sexo",onChange:this.handleChange.bind(this),required:!0,select:!0,SelectProps:{native:!0},value:this.state.sexo,variant:"outlined",helperText:this.state.e_sexo?"Seleccione el sexo del usuario, por favor":"",error:this.state.e_sexo,children:[Object(M.jsx)("option",{value:null,label:""}),this.state.sexos.map((function(e){return Object(M.jsx)("option",{value:e.value,children:e.label},e.value)}))]})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Email",name:"email",onChange:this.handleChangeMail.bind(this),type:"email",value:this.state.email,variant:"outlined",error:this.state.e_mail})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(ja.a,{mask:"99999999-9",value:this.state.dui,onChange:this.onChangeDui.bind(this),onBlur:this.onChangeDui.bind(this),children:function(t){return Object(M.jsx)(wt.a,Object(_.a)(Object(_.a)({},t),{},{fullWidth:!0,label:"DUI",name:"dui",value:e.state.dui,type:"text",variant:"outlined",helperText:e.state.e_dui?e.state.e_dui_msj:"",error:e.state.e_dui}))}})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(ja.a,{mask:"9999-999999-999-9",value:this.state.nit,onChange:this.onChangeNit.bind(this),onBlur:this.onChangeNit.bind(this),children:function(t){return Object(M.jsx)(wt.a,{fullWidth:!0,label:"NIT",name:"nit",type:"text",value:e.state.nit,variant:"outlined",helperText:e.state.e_nit?e.state.e_nit_msj:"",error:e.state.e_nit})}})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Celular",name:"celular",onChange:this.handleChange.bind(this),type:"text",value:this.state.celular,variant:"outlined"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Telefono",name:"telefono",onChange:this.handleChange.bind(this),type:"text",value:this.state.telefono,variant:"outlined"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Rol",name:"id_rol",onChange:this.handleChange.bind(this),required:!0,select:!0,SelectProps:{native:!0},value:this.state.id_rol,variant:"outlined",children:this.state.states.map((function(e){return Object(M.jsx)("option",{value:e.value,children:e.label},e.value)}))})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Sucursal",name:"id_sucursal",onChange:this.handleChange.bind(this),required:!0,select:!0,SelectProps:{native:!0},value:this.state.id_sucursal,variant:"outlined",children:this.state.sucursales.map((function(e){return Object(M.jsx)("option",{value:e.value,children:e.label},e.value)}))})})]})}),Object(M.jsx)(C.a,{}),Object(M.jsxs)(y.a,{display:"flex",justifyContent:"left",p:2,children:["view"!==ma&&Object(M.jsx)(B.a,{color:"primary",variant:"contained",type:"submit",children:"Guardar"}),Object(M.jsx)(B.a,{color:"primary",variant:"contained",style:{marginLeft:5},onClick:function(e){window.location="/turnos/app/users"},children:"Regresar"}),Object(M.jsx)(la,{onClick:this.openModalAudit.bind(this),open:this.state.openModalAudit,clave:"usuario/"+this.state.id_usuario,id:this.state.id_usuario})]})]})})}}]),a}(n.Component),ga=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),xa=function(){var e=It.getQueryVariable("action"),t=ga(),a=Object(n.useState)(null),i=Object(v.a)(a,2),r=i[0],o=i[1];Object(n.useEffect)((function(){se.whoami().then((function(e){o(e.data)})).catch((function(e){console.error(e)}))}),[]);var c={avatar:"/static/images/avatars/default-avatar.png",city:"San Salvador",country:"El Salvador",jobTitle:null!=r?r.username+" ("+r.idRol.nombre+") ":"loading",name:null!=r?r.primerNombre+" "+r.primerApellido:"loading",timezone:"GTM-7"};return Object(M.jsx)(ve,{className:t.root,title:"Account",children:Object(M.jsx)(xe.a,{maxWidth:"lg",children:Object(M.jsxs)(ze.a,{container:!0,spacing:1,children:["view"===e&&Object(M.jsx)(ze.a,{item:!0,lg:4,md:6,xs:12,children:Object(M.jsx)(Yt,{user:c})}),"view"!==e&&Object(M.jsx)(ze.a,{item:!0,xl:12,lg:12,md:12,xs:12,children:Object(M.jsx)(pa,{})})]})})})},fa=Object(d.a)((function(e){return{root:{},avatar:{marginRight:e.spacing(2)}}})),va=function(e){var t=e.className,a=e.data,n=Object(T.a)(e,["className","data"]),i=fa(),r=[{field:"id",headerName:"Id",minWidth:100},{field:"nombre",headerName:"Nombre de estaci\xf3n",minWidth:300,flex:1},{field:"activo",headerName:"Estado",minWidth:200,disableClickEventBubbling:!0,renderCell:function(e){return e.value?Object(M.jsx)("span",{style:{color:"blue"},children:"Activo"}):Object(M.jsx)("span",{style:{color:"red"},children:"Inactivo"})}},{field:"idSucursal",headerName:"Sucursal",minWidth:200},{field:"fechaCreacion",headerName:"Fecha creaci\xf3n",description:"Fecha de creaci\xf3n",sortable:!1,minWidth:400,flex:.5,type:"dateTime"},{field:"button",headerName:"Accion",minWidth:200,disableClickEventBubbling:!0,flex:.5,renderCell:function(e){var t=function(){console.log(e.value),window.location="station?action=update&id="+e.value};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:function(){console.log(e.value),window.location="station?action=view&id="+e.value},children:Object(M.jsx)(ke.a,{})}),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:t,children:Object(M.jsx)(we.a,{})}),Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:t,children:Object(M.jsx)(_e.a,{})})]})]})}}];return Object(M.jsx)(Oe.a,Object(_.a)(Object(_.a)({className:Object(A.a)(i.root,t)},n),{},{children:Object(M.jsx)("div",{style:{height:400,width:"100%"},children:Object(M.jsx)(ye.a,{rows:a,columns:r,pageSize:5,filterModel:{items:[{columnField:"nombre",operatorValue:"contains",value:""}]}})})}))},Oa=Object(d.a)((function(e){return{root:{},importButton:{marginRight:e.spacing(1)},exportButton:{marginRight:e.spacing(1)}}})),ya=function(){window.location="station?action=new"},Sa=function(e){var t=e.className,a=Object(T.a)(e,["className"]),n=Oa();return Object(M.jsx)("div",Object(_.a)(Object(_.a)({className:Object(A.a)(n.root,t)},a),{},{children:Object(M.jsx)(y.a,{display:"flex",justifyContent:"flex-end",children:Object(M.jsx)(B.a,{color:"primary",variant:"contained",onClick:ya,style:{marginTop:10},children:"Crear Estaci\xf3n"})})}))},ka=se.getApiUrl(),Ca=function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,[{key:"findAll",value:function(){return ie.a.get("".concat(ka,"/admin/station/"))}},{key:"findById",value:function(e){return ie.a.get("".concat(ka,"/admin/station/").concat(e))}},{key:"save",value:function(e){return ie.a.post("".concat(ka,"/admin/station/"),e)}},{key:"update",value:function(e,t){return ie.a.put("".concat(ka,"/detalle/").concat(e),t)}},{key:"updateusuario",value:function(e,t){return ie.a.put("".concat(ka,"/admin/station/").concat(e),t)}},{key:"whoami",value:function(){return ie.a.get("".concat(ka,"/admin/station/whoami"))}},{key:"findAllSites",value:function(){return ie.a.get("".concat(ka,"/admin/sucursal/all"))}}]),e}(),wa=new Ca,Na=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),Ia=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).state={data:[],dataFormated:[],user:null},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){this.loadAllStations()}},{key:"loadAllStations",value:function(){var e=this;wa.findAll().then((function(t){e.setState({data:t.data}),e.makeDataFormated(t.data)})).catch((function(e){console.error(e)}))}},{key:"makeDataFormated",value:function(e){var t=[];e.map((function(e){return t.push({nombre:e.nombre,descripcion:e.descripcion,fechaCreacion:Ue()(e.fechaCreacion).format("DD/MM/YYYY"),id:e.idEstacion,idSucursal:e.idSucursal.nombre,ocupado:e.ocupado,activo:Boolean(e.activo),button:e.idEstacion})})),this.setState({dataFormated:t})}},{key:"render",value:function(){return Object(M.jsx)(ve,{className:Na.root,title:"Lista de Estaciones de atenci\xf3n",children:Object(M.jsxs)(xe.a,{maxWidth:!1,children:[Object(M.jsx)(Sa,{}),Object(M.jsx)(y.a,{mt:3,children:Object(M.jsx)(va,{data:this.state.dataFormated})})]})})}}]),a}(n.Component),_a=a(636),Ta=a(749),Aa=a(759),Ea=It.getQueryVariable("action"),Ba=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).useStyles=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"90%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3),marginTop:e.spacing(3)}}})),n.state={id:"",nombre:"",e_nombre:!1,descripcion:"",activo:!0,sucursales:[{value:1,label:"Central"}],id_sucursal:1,ocupado:!1,isLoading:!1},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){if("view"===Ea||"update"===Ea){var e=It.getQueryVariable("id");this.loadStationById(e),this.setState({id:e})}this.loadAllSites()}},{key:"loadAllSites",value:function(){var e=this;wa.findAllSites().then((function(t){e.setState({sucursales:t.data})})).catch((function(e){le.b.error("Error al cargar sucursales")}))}},{key:"loadStationById",value:function(e){var t=this;wa.findById(e).then((function(e){var a=e.data;t.setState({nombre:a.nombre,descripcion:a.descripcion,activo:a.activo,ocupado:a.ocupado,id_sucursal:a.idSucursal.idSucursal})})).catch((function(e){console.error(e)}))}},{key:"handleChange",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"handleChangeChk",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.checked))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.setState({isLoading:!0}),""===this.state.nombre)le.b.warn("Nombre de la estaci\xf3n es requerido"),this.setState({e_nombre:!0}),this.setState({isLoading:!1});else{var t={nombre:this.state.nombre,descripcion:this.state.descripcion,ocupado:this.state.ocupado,idSucursal:{idSucursal:parseInt(this.state.id_sucursal)},activo:this.state.activo};if("update"===Ea){var a=It.getQueryVariable("id");t.idEstacion=a}this.save(t)}}},{key:"save",value:function(e){var t=this;wa.save(e).then((function(e){le.b.success("Guardado correctamente"),setTimeout((function(){window.location="/turnos/app/stations"}),1e3)})).catch((function(e){console.error(e),t.setState({isLoading:!1})}))}},{key:"openModalAudit",value:function(){this.setState({openModalAudit:!0})}},{key:"render",value:function(){var e=this.useStyles;return Object(M.jsx)(ve,{className:e.root,title:"Estaci\xf3n de atenci\xf3n",children:Object(M.jsx)(xe.a,{maxWidth:!1,children:Object(M.jsx)(y.a,{mt:3,children:Object(M.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:this.handleSubmit.bind(this),children:Object(M.jsxs)(Oe.a,{children:[Object(M.jsx)(Jt.a,{subheader:"Detalles de Estaci\xf3n de Atenci\xf3n",title:"Estaci\xf3n"}),Object(M.jsx)(C.a,{}),Object(M.jsx)(He.a,{children:Object(M.jsxs)(ze.a,{container:!0,spacing:3,children:[Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,helperText:this.state.e_nombre?"Ingresa el nombre de la estaci\xf3n, por favor":"",label:"Nombre",name:"nombre",onChange:this.handleChange.bind(this),required:!0,value:this.state.nombre,variant:"outlined",error:this.state.e_nombre})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Descripci\xf3n",name:"descripcion",onChange:this.handleChange.bind(this),value:this.state.descripcion,variant:"outlined"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(_a.a,{control:Object(M.jsx)(Ta.a,{checked:this.state.activo,name:"activo",onChange:this.handleChangeChk.bind(this),inputProps:{"aria-label":"controlled"}}),label:"Activo"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(_a.a,{control:Object(M.jsx)(Ta.a,{checked:this.state.ocupado,name:"ocupado",onChange:this.handleChangeChk.bind(this),inputProps:{"aria-label":"controlled"}}),label:"Ocupado"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Sucursal",name:"id_sucursal",onChange:this.handleChange.bind(this),required:!0,select:!0,SelectProps:{native:!0},value:this.state.id_sucursal,variant:"outlined",children:this.state.sucursales.map((function(e){return Object(M.jsx)("option",{value:e.idSucursal,children:e.nombre},e.idSucursal)}))})})]})}),Object(M.jsx)(C.a,{}),this.state.isLoading?Object(M.jsx)(Aa.a,{}):Object(M.jsxs)(y.a,{display:"flex",justifyContent:"left",p:2,children:["view"!==Ea&&Object(M.jsx)(B.a,{color:"primary",variant:"contained",type:"submit",children:"Guardar"}),Object(M.jsx)(B.a,{color:"primary",variant:"contained",style:{marginLeft:5},onClick:function(e){window.location="/turnos/app/stations"},children:"Regresar"}),Object(M.jsx)(la,{onClick:this.openModalAudit.bind(this),open:this.state.openModalAudit,clave:"usuario/"+this.state.id_usuario,id:this.state.id_usuario})]})]})})})})})}}]),a}(n.Component),Wa=Object(d.a)((function(e){return{root:{},avatar:{marginRight:e.spacing(2)}}})),Da=function(e){var t=e.className,a=e.data,n=Object(T.a)(e,["className","data"]),i=Wa(),r=[{field:"id",headerName:"Id",minWidth:100},{field:"nombre",headerName:"Nombre de categor\xeda",minWidth:300,flex:1},{field:"activo",headerName:"Estado",minWidth:200,disableClickEventBubbling:!0,renderCell:function(e){return e.value?Object(M.jsx)("span",{style:{color:"blue"},children:"Activo"}):Object(M.jsx)("span",{style:{color:"red"},children:"Inactivo"})}},{field:"fechaCreacion",headerName:"Fecha creaci\xf3n",description:"Fecha de creaci\xf3n",sortable:!1,minWidth:400,flex:.5,type:"dateTime"},{field:"button",headerName:"Accion",minWidth:200,disableClickEventBubbling:!0,flex:.5,renderCell:function(e){var t=function(){window.location="category?action=update&id="+e.value};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:function(){window.location="category?action=view&id="+e.value},children:Object(M.jsx)(ke.a,{})}),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:t,children:Object(M.jsx)(we.a,{})}),Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:t,children:Object(M.jsx)(_e.a,{})})]})]})}}];return Object(M.jsx)(Oe.a,Object(_.a)(Object(_.a)({className:Object(A.a)(i.root,t)},n),{},{children:Object(M.jsx)("div",{style:{height:400,width:"100%"},children:Object(M.jsx)(ye.a,{rows:a,columns:r,pageSize:5,filterModel:{items:[{columnField:"nombre",operatorValue:"contains",value:""}]}})})}))},Ma=Object(d.a)((function(e){return{root:{},importButton:{marginRight:e.spacing(1)},exportButton:{marginRight:e.spacing(1)}}})),Fa=function(){window.location="category?action=new"},Ra=function(e){var t=e.className,a=Object(T.a)(e,["className"]),n=Ma();return Object(M.jsx)("div",Object(_.a)(Object(_.a)({className:Object(A.a)(n.root,t)},a),{},{children:Object(M.jsx)(y.a,{display:"flex",justifyContent:"flex-end",children:Object(M.jsx)(B.a,{color:"primary",variant:"contained",onClick:Fa,style:{marginTop:10},children:"Crear Categor\xeda"})})}))},La=se.getApiUrl(),Pa=function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,[{key:"findAll",value:function(){return ie.a.get("".concat(La,"/admin/categ/"))}},{key:"findById",value:function(e){return ie.a.get("".concat(La,"/admin/categ/").concat(e))}},{key:"save",value:function(e){return ie.a.post("".concat(La,"/admin/categ/"),e)}},{key:"update",value:function(e,t){return ie.a.put("".concat(La,"/detalle/").concat(e),t)}},{key:"updateusuario",value:function(e,t){return ie.a.put("".concat(La,"/admin/categ/").concat(e),t)}},{key:"whoami",value:function(){return ie.a.get("".concat(La,"/admin/categ/whoami"))}},{key:"findAllStations",value:function(){return ie.a.get("".concat(La,"/admin/station/"))}},{key:"findAllSites",value:function(){return ie.a.get("".concat(La,"/admin/sucursal/all"))}},{key:"findStationBySite",value:function(e,t){return ie.a.get("".concat(La,"/admin/station/site/").concat(e,"/").concat(t))}},{key:"findcategoriasPorEstacionesByIdCategoria",value:function(e){return ie.a.get("".concat(La,"/admin/categ/categorias_estaciones/").concat(e))}},{key:"saveCategoriaEstacion",value:function(e){return ie.a.post("".concat(La,"/admin/catest"),e)}},{key:"delete",value:function(e){return ie.a.delete("".concat(La,"/admin/catest/").concat(e))}}]),e}(),Ua=new Pa,Va=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),qa=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).state={data:[],dataFormated:[],user:null},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){this.loadAll()}},{key:"loadAll",value:function(){var e=this;Ua.findAll().then((function(t){e.setState({data:t.data}),e.makeDataFormated(t.data)})).catch((function(e){console.error(e)}))}},{key:"makeDataFormated",value:function(e){var t=[];e.map((function(e){return t.push({nombre:e.nombre,descripcion:e.descripcion,fechaCreacion:Ue()(e.fechaCreacion).format("DD/MM/YYYY HH:MM"),id:e.idCategoriaTurnos,ocupado:e.ocupado,activo:Boolean(e.activo),button:e.idCategoriaTurnos})})),this.setState({dataFormated:t})}},{key:"render",value:function(){return Object(M.jsx)(ve,{className:Va.root,title:"Categor\xedas de servicios",children:Object(M.jsxs)(xe.a,{maxWidth:!1,children:[Object(M.jsx)(Ra,{}),Object(M.jsx)(y.a,{mt:3,children:Object(M.jsx)(Da,{data:this.state.dataFormated})})]})})}}]),a}(n.Component),za=a(324),Ha=a(773),Ya=a(777),Ja=a(776),Qa=a(772),Ga=a(774),$a=a(775),Xa=a(767),Za=a(176),Ka=a(265),en=a(268),tn=a(136),an=a(460),nn=a.n(an),rn=a(459),on=a.n(rn),cn=It.getQueryVariable("id"),sn=Object(d.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},iconButton:{marginTop:e.spacing(1)}}})),ln=function(e){var t=e.data,a=n.useState([]),i=Object(v.a)(a,2),r=i[0],o=i[1],c=n.useState([]),s=Object(v.a)(c,2),l=s[0],d=s[1],u=n.useState(""),h=Object(v.a)(u,2),b=h[0],j=h[1],m=n.useState([]),p=Object(v.a)(m,2),g=p[0],x=p[1],f=n.useState(""),O=Object(v.a)(f,2),y=O[0],S=O[1],k=sn();function C(e){Ua.findcategoriasPorEstacionesByIdCategoria(e).then((function(e){x(e.data)}))}function w(e,t){Ua.findStationBySite(e,t).then((function(e){o(e.data)})).catch((function(e){le.b.error("Error al cargar estaciones")}))}n.useEffect((function(){Ua.findAllSites().then((function(e){d(e.data),j(1),w(1,cn)})).catch((function(e){le.b.error("Error al cargar sucursales")})),null!==cn&&C(cn)}),[]);var N=function(e){Ua.saveCategoriaEstacion(e).then((function(e){le.b.success("Guardado correctamente"),w(b,cn),S(""),C(cn)})).catch((function(e){le.b.error("Error al guardar")}))};return Object(M.jsxs)(Qa.a,{component:Xa.a,children:[Object(M.jsxs)(Za.a,{className:k.formControl,children:[Object(M.jsx)(Ka.a,{id:"sucursal",children:"Sucursal"}),Object(M.jsxs)(en.a,{labelId:"sucursal",id:"select-sucursal",value:b,onChange:function(e){return function(e,t){var a=e.target.value;j(a),""!==a?w(a,cn):o([])}(e)},children:[Object(M.jsx)(tn.a,{value:"",children:Object(M.jsx)("em",{children:"None"})}),l.map((function(e){return Object(M.jsx)(tn.a,{value:e.idSucursal,children:e.nombre},e.idSucursal)}))]}),Object(M.jsx)(Lt.a,{children:"Seleccione la sucursal"})]}),Object(M.jsxs)(Za.a,{className:k.formControl,children:[Object(M.jsx)(Ka.a,{id:"estacion",children:"Estaci\xf3n"}),Object(M.jsxs)(en.a,{labelId:"estacion",id:"select-estacion",value:y,onChange:function(e){return function(e){S(e.target.value)}(e)},children:[Object(M.jsx)(tn.a,{value:"",children:Object(M.jsx)("em",{children:"None"})}),r.map((function(e){return Object(M.jsx)(tn.a,{value:e.idEstacion,children:e.nombre},e.idEstacion)}))]}),Object(M.jsx)(Lt.a,{children:"Seleccione la estaci\xf3n"})]}),Object(M.jsx)(z.a,{className:k.iconButton,color:"secondary","aria-label":"delete",onClick:function(){var e=r.find((function(e){return e.idEstacion===y}));null!==e&&void 0!==e?N({idEstacion:e,idCategoria:t}):le.b.warning("Seleccione una estaci\xf3n")},disabled:0==r.length||""==y,children:Object(M.jsx)(on.a,{})}),Object(M.jsxs)(Ha.a,{size:"small","aria-label":"a dense table",children:[Object(M.jsx)(Ga.a,{children:Object(M.jsxs)($a.a,{children:[Object(M.jsx)(Ja.a,{width:"10%",children:"ID"}),Object(M.jsx)(Ja.a,{children:"Estaci\xf3n"}),Object(M.jsx)(Ja.a,{children:"Sucursal"}),Object(M.jsx)(Ja.a,{children:"Acci\xf3n"})]})}),Object(M.jsx)(Ya.a,{children:g.map((function(e){return Object(M.jsxs)($a.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(M.jsx)(Ja.a,{children:e.idCategoriaEstacion}),Object(M.jsx)(Ja.a,{component:"th",scope:"row",children:e.idEstacion.nombre}),Object(M.jsx)(Ja.a,{component:"th",scope:"row",children:e.idEstacion.idSucursal.nombre}),Object(M.jsx)(Ja.a,{children:Object(M.jsx)(z.a,{"aria-label":"delete",onClick:function(){return t=e.idCategoriaEstacion,void Ua.delete(t).then((function(e){le.b.success("Eliminado con \xe9xito"),C(cn)})).catch((function(e){le.b.error("Error al eliminar")}));var t},children:Object(M.jsx)(nn.a,{style:{color:"#e74c3c"}})})})]},e.idCategoriaEstacion)}))})]})]})},dn=It.getQueryVariable("action"),un=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).handleChangeMulti=function(e){n.setState({estacionesSeleted:e})},n.useStyles=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"90%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3),marginTop:e.spacing(3)}}})),n.state={nombre:"",descripcion:"",activo:!0,prefijo:"",prioridad:1,icono:"",isLoading:!1,rangoPrioridad:[1,2,3,4,5,6,7,8,9,10],estaciones:[],estacionesSeleted:[],categoriaUpdate:null},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){if("view"===dn||"update"===dn){var e=It.getQueryVariable("id");this.loadById(e),this.setState({id:e}),this.loadCategoriasPorEstaciones(e)}this.loadAllStation()}},{key:"loadCategoriasPorEstaciones",value:function(e){var t=this;Ua.findcategoriasPorEstacionesByIdCategoria(e).then((function(e){var a=e.data,n=[];a.map((function(e){return n.push(e.idEstacion.nombre)})),t.setState({estacionesSeleted:n})})).catch((function(e){le.b.error("Error al cargar estaciones de atencion")}))}},{key:"loadById",value:function(e){var t=this;Ua.findById(e).then((function(e){var a=e.data;t.setState({nombre:a.nombre,descripcion:null!=a.descripcion?a.descripcion:"",activo:a.activo,prefijo:null!=a.prefijoTurno?a.prefijoTurno:"",prioridad:a.prioridad,icono:a.iconoCategoria}),t.setState({categoriaUpdate:a})})).catch((function(e){console.error(e)}))}},{key:"loadAllStation",value:function(){var e=this;Ua.findAllStations().then((function(t){e.setState({estaciones:t.data})})).catch((function(e){le.b.error("Error al cargar estaciones de atenci\xf3n")}))}},{key:"handleChange",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"handleChangeChk",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.checked))}},{key:"openModalAudit",value:function(){this.setState({openModalAudit:!0})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.setState({isLoading:!0}),""===this.state.nombre)le.b.warn("Nombre de la categor\xeda es requerido"),this.setState({e_nombre:!0}),this.setState({isLoading:!1});else if(""===this.state.prioridad)le.b.warn("Prioridad es requerido"),this.setState({e_prioridad:!0}),this.setState({isLoading:!1});else{var t={nombre:this.state.nombre,descripcion:this.state.descripcion,prefijoTurno:this.state.prefijo,prioridad:this.state.prioridad,activo:this.state.activo,iconoCategoria:this.state.icono};if("update"===dn){var a=It.getQueryVariable("id");t.idCategoriaTurnos=a}this.save(t)}}},{key:"save",value:function(e){var t=this;Ua.save(e).then((function(e){le.b.success("Guardado correctamente"),setTimeout((function(){window.location="/turnos/app/categories"}),1e3)})).catch((function(e){le.b.error(e),t.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this,t=this.useStyles;return Object(M.jsx)(ve,{className:t.root,title:"Categor\xeda de turno",children:Object(M.jsxs)(xe.a,{maxWidth:!1,children:[Object(M.jsx)(y.a,{mt:3,children:Object(M.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:this.handleSubmit.bind(this),children:Object(M.jsxs)(Oe.a,{children:[Object(M.jsx)(Jt.a,{subheader:"Detalles de categor\xeda de turno",title:"Categor\xeda de turno"}),Object(M.jsx)(C.a,{}),Object(M.jsx)(He.a,{children:Object(M.jsxs)(ze.a,{container:!0,spacing:3,children:[Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,helperText:this.state.e_nombre?"Ingresa el nombre de la categor\xeda, por favor":"",label:"Nombre",name:"nombre",onChange:this.handleChange.bind(this),required:!0,value:this.state.nombre,variant:"outlined",error:this.state.e_nombre})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Descripci\xf3n",name:"descripcion",onChange:this.handleChange.bind(this),value:this.state.descripcion,variant:"outlined"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(_a.a,{control:Object(M.jsx)(Ta.a,{checked:this.state.activo,name:"activo",onChange:this.handleChangeChk.bind(this),inputProps:{"aria-label":"controlled"}}),label:"Activo"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(ja.a,{mask:"aa",value:this.state.prefijo.toUpperCase(),onChange:this.handleChange.bind(this),onBlur:this.handleChange.bind(this),children:function(t){return Object(M.jsx)(wt.a,Object(_.a)(Object(_.a)({},t),{},{fullWidth:!0,label:"Prefijo",name:"prefijo",value:e.state.prefijo.toUpperCase(),type:"text",variant:"outlined",helperText:e.state.e_dui?e.state.e_dui_msj:"",error:e.state.e_dui}))}})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Prioridad",name:"prioridad",onChange:this.handleChange.bind(this),required:!0,select:!0,SelectProps:{native:!0},value:this.state.prioridad,variant:"outlined",children:this.state.rangoPrioridad.map((function(e){return Object(M.jsx)("option",{value:e,children:e},e)}))})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(za.a,{title:"Nombre del \xedcono (Cualquiera de https://fonts.google.com/icons)",children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"\xcdcono de categor\xeda",name:"icono",onChange:this.handleChange.bind(this),value:this.state.icono,variant:"outlined"})})})]})}),Object(M.jsx)(C.a,{}),this.state.isLoading?Object(M.jsx)(Aa.a,{}):Object(M.jsxs)(y.a,{display:"flex",justifyContent:"left",p:2,children:["view"!==dn&&Object(M.jsx)(B.a,{color:"primary",variant:"contained",type:"submit",children:"Guardar"}),Object(M.jsx)(B.a,{color:"primary",variant:"contained",style:{marginLeft:5},onClick:function(e){window.location="/turnos/app/categories"},children:"Regresar"}),Object(M.jsx)(la,{onClick:this.openModalAudit.bind(this),open:this.state.openModalAudit,clave:"usuario/"+this.state.id_usuario,id:this.state.id_usuario})]})]})})}),Object(M.jsx)(y.a,{mt:3,children:Object(M.jsxs)(Oe.a,{children:[Object(M.jsx)(Jt.a,{title:"Estaciones que pueden atender esta categor\xeda",subheader:"Solo las estaciones permitidas en esta lista pueden atender esta categor\xeda"}),Object(M.jsx)(C.a,{}),Object(M.jsx)(He.a,{children:Object(M.jsx)(ze.a,{container:!0,spacing:3,children:Object(M.jsx)(ze.a,{item:!0,md:6,xs:12,children:Object(M.jsx)(ln,{data:this.state.categoriaUpdate})})})})]})})]})})}}]),a}(n.Component),hn=Object(d.a)((function(e){return{root:{},avatar:{marginRight:e.spacing(2)}}})),bn=function(e){var t=e.className,a=e.data,n=Object(T.a)(e,["className","data"]),i=hn(),r=[{field:"id",headerName:"Id",minWidth:100},{field:"nombre",headerName:"Nombre del servicio",minWidth:300,flex:1},{field:"activo",headerName:"Estado",minWidth:200,disableClickEventBubbling:!0,renderCell:function(e){return e.value?Object(M.jsx)("span",{style:{color:"blue"},children:"Activo"}):Object(M.jsx)("span",{style:{color:"red"},children:"Inactivo"})}},{field:"fechaCreacion",headerName:"Fecha creaci\xf3n",description:"Fecha de creaci\xf3n",sortable:!1,minWidth:400,flex:.5,type:"dateTime"},{field:"button",headerName:"Accion",minWidth:200,disableClickEventBubbling:!0,flex:.5,renderCell:function(e){var t=function(){window.location="service?action=update&id="+e.value};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:function(){window.location="servive?action=view&id="+e.value},children:Object(M.jsx)(ke.a,{})}),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:t,children:Object(M.jsx)(we.a,{})}),Object(M.jsx)(z.a,{"aria-label":"Ver",onClick:t,children:Object(M.jsx)(_e.a,{})})]})]})}}];return Object(M.jsx)(Oe.a,Object(_.a)(Object(_.a)({className:Object(A.a)(i.root,t)},n),{},{children:Object(M.jsx)("div",{style:{height:400,width:"100%"},children:Object(M.jsx)(ye.a,{rows:a,columns:r,pageSize:5,filterModel:{items:[{columnField:"nombre",operatorValue:"contains",value:""}]}})})}))},jn=Object(d.a)((function(e){return{root:{},importButton:{marginRight:e.spacing(1)},exportButton:{marginRight:e.spacing(1)}}})),mn=function(){window.location="service?action=new"},pn=function(e){var t=e.className,a=Object(T.a)(e,["className"]),n=jn();return Object(M.jsx)("div",Object(_.a)(Object(_.a)({className:Object(A.a)(n.root,t)},a),{},{children:Object(M.jsx)(y.a,{display:"flex",justifyContent:"flex-end",children:Object(M.jsx)(B.a,{color:"primary",variant:"contained",onClick:mn,style:{marginTop:10},children:"Crear Servicio"})})}))},gn=se.getApiUrl(),xn=function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,[{key:"findAll",value:function(){return ie.a.get("".concat(gn,"/admin/service/"))}},{key:"findById",value:function(e){return ie.a.get("".concat(gn,"/admin/service/").concat(e))}},{key:"save",value:function(e){return ie.a.post("".concat(gn,"/admin/service/"),e)}},{key:"update",value:function(e,t){return ie.a.put("".concat(gn,"/detalle/").concat(e),t)}},{key:"updateusuario",value:function(e,t){return ie.a.put("".concat(gn,"/admin/service/").concat(e),t)}},{key:"whoami",value:function(){return ie.a.get("".concat(gn,"/admin/service/whoami"))}},{key:"findAllCateg",value:function(){return ie.a.get("".concat(gn,"/admin/categ/"))}}]),e}(),fn=new xn,vn=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),On=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).state={data:[],dataFormated:[],user:null},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){this.loadAll()}},{key:"loadAll",value:function(){var e=this;fn.findAll().then((function(t){e.setState({data:t.data}),e.makeDataFormated(t.data)})).catch((function(e){console.error(e)}))}},{key:"makeDataFormated",value:function(e){var t=[];e.map((function(e){return t.push({nombre:e.nombreServicio,descripcion:e.descripcion,fechaCreacion:Ue()(e.fechaCreacion).format("DD/MM/YYYY HH:MM"),id:e.idServicioCategoria,ocupado:e.ocupado,activo:Boolean(e.activo),button:e.idServicioCategoria})})),this.setState({dataFormated:t})}},{key:"render",value:function(){return Object(M.jsx)(ve,{className:vn.root,title:"Servicios",children:Object(M.jsxs)(xe.a,{maxWidth:!1,children:[Object(M.jsx)(pn,{}),Object(M.jsx)(y.a,{mt:3,children:Object(M.jsx)(bn,{data:this.state.dataFormated})})]})})}}]),a}(n.Component),yn=It.getQueryVariable("action"),Sn=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).useStyles=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"90%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3),marginTop:e.spacing(3)}}})),n.state={nombre:"",descripcion:"",activo:!0,prefijo:"",prioridad:1,icono:"",isLoading:!1,rangoPrioridad:[1,2,3,4,5,6,7,8,9,10],category:1,categories:[],e_category:!1},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){if(this.loadAllCategories(),"view"===yn||"update"===yn){var e=It.getQueryVariable("id");this.loadStationById(e),this.setState({id:e})}}},{key:"loadStationById",value:function(e){var t=this;fn.findById(e).then((function(e){var a=e.data;t.setState({nombre:a.nombreServicio,descripcion:null!=a.descripcion?a.descripcion:"",activo:a.activo,prioridad:a.prioridad,icono:null!=a.iconoServicio?a.iconoServicio:"",category:parseInt(a.idCategoriaTurno.idCategoriaTurnos)})})).catch((function(e){console.error(e)}))}},{key:"loadAllCategories",value:function(){var e=this;fn.findAllCateg().then((function(t){e.setState({categories:t.data,category:1})})).catch((function(e){le.b.error("err")}))}},{key:"handleChange",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"handleChangeChk",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.checked))}},{key:"openModalAudit",value:function(){this.setState({openModalAudit:!0})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.setState({isLoading:!0}),""===this.state.nombre)le.b.warn("Nombre del servicio es requerido"),this.setState({e_nombre:!0}),this.setState({isLoading:!1});else if(""===this.state.prioridad)le.b.warn("Prioridad es requerido"),this.setState({e_prioridad:!0}),this.setState({isLoading:!1});else if(""===this.state.category)le.b.warn("Categor\xeda es requerido"),this.setState({e_category:!0}),this.setState({isLoading:!1});else{var t={nombreServicio:this.state.nombre,descripcion:this.state.descripcion,prioridad:this.state.prioridad,activo:this.state.activo,iconoServicio:this.state.icono,idCategoriaTurno:{idCategoriaTurnos:parseInt(this.state.category)}};if("update"===yn){var a=It.getQueryVariable("id");t.idServicioCategoria=a}this.save(t)}}},{key:"save",value:function(e){var t=this;fn.save(e).then((function(e){le.b.success("Guardado correctamente"),setTimeout((function(){window.location="/turnos/app/services"}),1e3)})).catch((function(e){le.b.error("Error ocurrido"),t.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this.useStyles;return Object(M.jsx)(ve,{className:e.root,title:"Servicio",children:Object(M.jsx)(xe.a,{maxWidth:!1,children:Object(M.jsx)(y.a,{mt:3,children:Object(M.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:this.handleSubmit.bind(this),children:Object(M.jsxs)(Oe.a,{children:[Object(M.jsx)(Jt.a,{subheader:"Detalles de servicio",title:"Servicio de turno"}),Object(M.jsx)(C.a,{}),Object(M.jsx)(He.a,{children:Object(M.jsxs)(ze.a,{container:!0,spacing:3,children:[Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,helperText:this.state.e_nombre?"Ingresa el nombre de la categor\xeda, por favor":"",label:"Nombre",name:"nombre",onChange:this.handleChange.bind(this),required:!0,value:this.state.nombre,variant:"outlined",error:this.state.e_nombre})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Descripci\xf3n",name:"descripcion",onChange:this.handleChange.bind(this),value:this.state.descripcion,variant:"outlined"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(_a.a,{control:Object(M.jsx)(Ta.a,{checked:this.state.activo,name:"activo",onChange:this.handleChangeChk.bind(this),inputProps:{"aria-label":"controlled"}}),label:"Activo"})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Categor\xeda de turno",name:"category",onChange:this.handleChange.bind(this),required:!0,select:!0,SelectProps:{native:!0},value:parseInt(this.state.category),variant:"outlined",error:this.state.e_category,children:this.state.categories.map((function(e){return Object(M.jsx)("option",{value:parseInt(e.idCategoriaTurnos),children:e.nombre},e.idCategoriaTurnos)}))})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"Prioridad",name:"prioridad",onChange:this.handleChange.bind(this),required:!0,select:!0,SelectProps:{native:!0},value:this.state.prioridad,variant:"outlined",children:this.state.rangoPrioridad.map((function(e){return Object(M.jsx)("option",{value:e,children:e},e)}))})}),Object(M.jsx)(ze.a,{item:!0,md:3,xs:12,children:Object(M.jsx)(za.a,{title:"Nombre del \xedcono (Cualquiera de https://fonts.google.com/icons)",children:Object(M.jsx)(wt.a,{fullWidth:!0,label:"\xcdcono del servicio",name:"icono",onChange:this.handleChange.bind(this),value:this.state.icono,variant:"outlined"})})})]})}),Object(M.jsx)(C.a,{}),this.state.isLoading?Object(M.jsx)(Aa.a,{}):Object(M.jsxs)(y.a,{display:"flex",justifyContent:"left",p:2,children:["view"!==yn&&Object(M.jsx)(B.a,{color:"primary",variant:"contained",type:"submit",children:"Guardar"}),Object(M.jsx)(B.a,{color:"primary",variant:"contained",style:{marginLeft:5},onClick:function(e){window.location="/turnos/app/services"},children:"Regresar"}),Object(M.jsx)(la,{onClick:this.openModalAudit.bind(this),open:this.state.openModalAudit,clave:"usuario/"+this.state.id_usuario,id:this.state.id_usuario})]})]})})})})})}}]),a}(n.Component),kn=se.getApiUrl(),Cn=function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,[{key:"findAllCategories",value:function(){return ie.a.get("".concat(kn,"/kiosko/categories"))}},{key:"findByIdCategories",value:function(e){return ie.a.get("".concat(kn,"/kiosko/servicioscateg?id=").concat(e))}},{key:"save",value:function(e){return ie.a.post("".concat(kn,"/kiosko/turno"),e)}}]),e}(),wn=new Cn,Nn=a(778),In=a(752),_n=a(747),Tn=a(758),An=a(462),En=a.n(An),Bn=a(762),Wn=a(763),Dn=a(761),Mn=a(750),Fn=a(764),Rn=a(739),Ln=a(760),Pn=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).setRef=function(e){return n.canvasEl=e},n.state={checked:!1},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.data;return Object(M.jsxs)("div",{className:"relativeCSS",style:{width:290,textAlign:"center"},children:[Object(M.jsx)("style",{type:"text/css",media:"print",children:" @page { size: 80mm } "}),Object(M.jsx)("img",{src:"/turnos/static/logo.png",alt:"logo"}),Object(M.jsx)(k.a,{sx:{ml:2,flex:1},variant:"h4",component:"div",children:'Bienvenido a: "Tu empresa"'}),Object(M.jsx)(k.a,{sx:{ml:2,flex:1},variant:"h1",component:"div",children:e.noConsecutivo}),Object(M.jsx)(k.a,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:e.fechaCreacion})]})}}]),a}(n.PureComponent),Un=a(461),Vn=a.n(Un),qn=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).useStyles=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),n.setComponentRef=function(e){n.componentRef=e},n.reactToPrintContent=function(){return n.componentRef},n.reactToPrintTrigger=function(){return Object(M.jsx)("button",{id:"btnImprimir",style:{display:"none"},children:"Print pure text using a Class Component"})},n.state={isLoading:!1,arrayCategories:[],open:!1,arrayServices:[],turnoSeleted:{}},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){this.getAllCategories()}},{key:"getAllCategories",value:function(){var e=this;wn.findAllCategories().then((function(t){e.setState({arrayCategories:t.data})})).catch((function(e){le.b.error("error al cargar categor\xecas")}))}},{key:"renderCategories",value:function(){var e=this;return this.state.arrayCategories.map((function(t){return Object(M.jsx)(In.a,{item:!0,xs:6,md:4,children:Object(M.jsx)(Ke.a,{sx:{minWidth:50},onClickCapture:function(a){return e.onClickCategory(a,t.idCategoriaTurnos)},children:Object(M.jsx)(Nn.a,{children:Object(M.jsxs)(at.a,{style:{textAlign:"center"},children:[null!==t.iconoCategoria&&""!==t.iconoCategoria&&Object(M.jsx)(D.a,{children:t.iconoCategoria}),Object(M.jsx)(k.a,{sx:{fontSize:14},color:"textPrimary",gutterBottom:!0,children:t.nombre})]})})})},t.idCategoriaTurnos)}))}},{key:"onClickCategory",value:function(e,t){this.renderServices(t)}},{key:"renderServices",value:function(e){this.loadServicesByIdCategory(e)}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"loadServicesByIdCategory",value:function(e){var t=this;wn.findByIdCategories(e).then((function(a){0===a.data.length?t.save(e,null):(t.setState({arrayServices:a.data}),t.setState({open:!0}))})).catch((function(e){console.error(e)}))}},{key:"renderServicesById",value:function(){var e=this;return this.state.arrayServices.map((function(t){return Object(M.jsxs)(i.a.Fragment,{children:[Object(M.jsx)(Mn.a,{onClickCapture:function(a){return e.save(t.idCategoriaTurno.idCategoriaTurnos,t.idServicioCategoria)},button:!0,children:Object(M.jsxs)(Rn.a,{children:[null!==t.iconoServicio&&""!==t.iconoServicio&&Object(M.jsx)(Ln.a,{children:Object(M.jsx)(D.a,{children:t.iconoServicio})}),Object(M.jsx)(Dn.a,{primary:t.nombreServicio,secondary:t.descripcion})]})},t.idServicioCategoria),Object(M.jsx)(tt.a,{})]},t.idServicioCategoria)}))}},{key:"save",value:function(e,t){var a=this,n={idCategoriaTurnos:{idCategoriaTurnos:e},controlTurnoDetalleSet:[{}]};null!==t&&(n.idServiciosCategoria={idServicioCategoria:t}),wn.save(n).then((function(e){le.b.success("Bienvenido: Tome su ticket, por favor"),a.setState({turnoSeleted:e.data,open:!1}),document.getElementById("btnImprimir").click()})).catch((function(e){le.b.error("Error al generar su turno")}))}},{key:"renderTicket",value:function(){return Pn}},{key:"render",value:function(){var e=this.useStyles;return Object(M.jsxs)(ve,{className:e.root,title:"Kiosko QueueApp",children:[Object(M.jsx)(y.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",marginTop:"15px",children:Object(M.jsx)(xe.a,{maxWidth:"md",children:Object(M.jsx)(In.a,{container:!0,spacing:2,children:this.renderCategories()})})}),Object(M.jsxs)(_n.a,{fullScreen:!0,open:this.state.open,onClose:this.handleClose.bind(this),children:[Object(M.jsx)(Bn.a,{sx:{position:"relative"},children:Object(M.jsxs)(Wn.a,{children:[Object(M.jsx)(Tn.a,{edge:"start",color:"inherit",onClick:this.handleClose.bind(this),"aria-label":"close",children:Object(M.jsx)(En.a,{})}),Object(M.jsx)(k.a,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Seleccione el servicio a solicitar"})]})}),Object(M.jsx)(Fn.a,{style:{marginTop:10},children:this.renderServicesById()})]}),Object(M.jsx)(Vn.a,{content:this.reactToPrintContent,documentTitle:"AwesomeFileName",removeAfterPrint:!0,trigger:this.reactToPrintTrigger}),Object(M.jsx)("div",{style:{display:"none"},children:Object(M.jsx)(Pn,{ref:this.setComponentRef,data:this.state.turnoSeleted})})]})}}]),a}(n.Component),zn=se.getApiUrl(),Hn=function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,[{key:"findAllEstacionesDisponibles",value:function(){return ie.a.get("".concat(zn,"/atencion/estacion"))}},{key:"findByIdCategories",value:function(e){return ie.a.get("".concat(zn,"/atencion/servicioscateg?id=").concat(e))}},{key:"findNextTurn",value:function(){return ie.a.get("".concat(zn,"/atencion/next"))}},{key:"findAllActiveStates",value:function(){return ie.a.get("".concat(zn,"/atencion/states"))}},{key:"updateTurn",value:function(e,t){return ie.a.put("".concat(zn,"/turno/").concat(e),t)}},{key:"completeTurn",value:function(e){return ie.a.post("".concat(zn,"/turno/complete/").concat(e))}},{key:"increaseCalled",value:function(e){return ie.a.post("".concat(zn,"/turno/called/").concat(e))}},{key:"findTurnInProgress",value:function(){return ie.a.get("".concat(zn,"/turno/inprogress"))}},{key:"save",value:function(e){return ie.a.post("".concat(zn,"/atencion/estacion/usuario"),e)}},{key:"vacateStation",value:function(){return ie.a.post("".concat(zn,"/atencion/station/vacate"))}},{key:"findOccupiedStation",value:function(){return ie.a.get("".concat(zn,"/atencion/station/occupied"))}}]),e}(),Yn=new Hn,Jn=a(740),Qn=a(770),Gn=a(771),$n=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).state={arrayEstaciones:[],open:!1,isLoading:!1,estacionSelected:{},isStationSelected:!1},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){this.loadEstacionesDisponibles(),this.loadSelectStationFromApi()}},{key:"loadSelectStationFromApi",value:function(){var e=this;Yn.findOccupiedStation().then((function(t){console.log(t.data),e.setState({estacionSelected:t.data}),e.setStationContext(t.data)})).catch((function(e){}))}},{key:"loadEstacionesDisponibles",value:function(){var e=this;Yn.findAllEstacionesDisponibles().then((function(t){e.setState({arrayEstaciones:t.data})})).catch((function(e){le.b.error("Error al cargar estaciones disponibles")}))}},{key:"renderEstaciones",value:function(){var e=this;return this.state.arrayEstaciones.map((function(t){return Object(M.jsx)(In.a,{item:!0,xs:6,md:6,children:Object(M.jsx)(Ke.a,{sx:{minWidth:50},onClickCapture:function(a){return e.onClickEstacion(a,t)},children:Object(M.jsx)(Nn.a,{children:Object(M.jsx)(at.a,{style:{textAlign:"center"},children:Object(M.jsx)(k.a,{sx:{fontSize:14},color:"textPrimary",gutterBottom:!0,children:t.nombre})})})})},t.idEstacion)}))}},{key:"onClickEstacion",value:function(e,t){this.setState({open:!0,estacionSelected:t})}},{key:"handleCancel",value:function(){this.setState({open:!1})}},{key:"handleOk",value:function(e){var t=this;Yn.save(this.state.estacionSelected).then((function(e){le.b.success("Estaci\xf3n actualizada correctamente."),t.setState({open:!1}),t.setStationContext(e.data)})).catch((function(e){e.response.data.status&&423===e.response.data.status?le.b.warning(e.response.data.message):le.b.error("Error al actualizar estaci\xf3n!")}))}},{key:"setStationContext",value:function(e){this.setState({isStationSelected:e})}},{key:"render",value:function(){var e=this;return Object(M.jsxs)(xe.a,{maxWidth:"xl",children:[Object(M.jsx)(k.a,{variant:"h2",gutterBottom:!0,component:"div",mb:10,children:"Seleccione la estaci\xf3n que atender\xe1"}),Object(M.jsx)(In.a,{container:!0,spacing:2,children:this.renderEstaciones()}),Object(M.jsxs)(_n.a,{sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:435}},maxWidth:"xs",open:this.state.open,children:[Object(M.jsxs)(Jn.a,{children:["Confirme que va a ocupar ",this.state.estacionSelected.nombre]}),Object(M.jsx)(Qn.a,{dividers:!0,children:Object(M.jsx)(k.a,{variant:"body1",gutterBottom:!0,children:"Al seleccionar esta estaci\xf3n, nadie m\xe1s podr\xe1 ocuparla, y estar\xe1 ligada a esta sesi\xf3n de usuario."})}),Object(M.jsxs)(Gn.a,{children:[Object(M.jsx)(B.a,{autoFocus:!0,onClick:this.handleCancel.bind(this),children:"Cancel"}),Object(M.jsx)(B.a,{onClick:this.handleOk.bind(this),children:"Ok"})]})]}),this.state.isStationSelected&&Object(M.jsx)(Et.Consumer,{children:function(t){return(0,t.selectStationToAttend)(e.state.estacionSelected)}})]})}}]),a}(n.Component),Xn=a(741),Zn=a(323),Kn=a(742),ei=a(743),ti=a(744),ai=Object(d.a)((function(e){return{root:{},importButton:{marginRight:e.spacing(1)},exportButton:{marginRight:e.spacing(1)},title:{flexGrow:1}}})),ni=function(e){var t=e.className,a=e.title,n=e.vacateStation,i=Object(T.a)(e,["className","title","vacateStation"]),r=ai();return Object(M.jsx)("div",Object(_.a)(Object(_.a)({className:Object(A.a)(r.root,t)},i),{},{children:Object(M.jsxs)(y.a,{display:"flex",justifyContent:"flex-left",children:[Object(M.jsx)(k.a,{className:r.title,pt:10,variant:"h1",gutterBottom:!0,component:"div",children:a}),Object(M.jsx)(B.a,{color:"primary",variant:"contained",onClick:function(){n()},style:{marginTop:10},children:"Dejar de atender Estaci\xf3n"})]})}))},ii=a(465),ri=a.n(ii),oi=a(464),ci=a.n(oi),si=a(463),li=a.n(si),di=a(173),ui=a.n(di),hi="http://74.208.187.67:8080/Turnos/test-socket",bi=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).vacateStation=function(){null!==n.state.turnSelected?le.b.warn("Finalice el turno en atenci\xf3n antes de dejar de atender esta estaci\xf3n!"):Yn.vacateStation().then((function(e){le.b.success("Acci\xf3n realizada con \xe9xito"),n.props.destroyStationAttended(),window.location="atencion"})).catch((function(e){le.b.error("Error ocurrido")}))},n.sendMessage=function(e){console.log(e),n.clientRefTurn.sendMessage("/app/turn",JSON.stringify(e)),n.clientRef.sendMessage("/app/hello",JSON.stringify(e))},n.state={isLoading:!1,estacion:n.props.estacion,turnSelected:null,arrayStates:[],SelectedState:1,open:!1,turnDetailSelected:null,called:0,destroyStationContext:n.props.destroyStationAttended},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){this.loadAllActiveStates(),this.loadTurnInProgress(),this.loadSelectStationFromApi()}},{key:"loadTurnInProgress",value:function(){var e=this;Yn.findTurnInProgress().then((function(t){e.setState({turnSelected:t.data,turnDetailSelected:t.data.controlTurnoDetalleSet[0],called:t.data.controlTurnoDetalleSet[0].noSolicitudes})})).catch((function(e){}))}},{key:"onClickNext",value:function(){var e=this;null!==this.state.turnSelected?(this.loadTurnInProgress(),le.b.warn("Finalice el turno en atenci\xf3n antes de llamar el pr\xf3ximo turno")):Yn.findNextTurn().then((function(t){e.setState({turnSelected:t.data,turnDetailSelected:t.data.controlTurnoDetalleSet[0],called:t.data.controlTurnoDetalleSet[0].noSolicitudes}),e.sendMessage({consecutivo:t.data.noConsecutivo,estacion:JSON.parse(e.state.estacion).nombre})})).catch((function(e){e.response.data.status&&404===e.response.data.status&&le.b.warning(e.response.data.message)}))}},{key:"loadAllActiveStates",value:function(){var e=this;Yn.findAllActiveStates().then((function(t){e.setState({arrayStates:t.data})})).catch((function(e){le.b.error("Error al cargar los estados del turno")}))}},{key:"renderStates",value:function(e){return this.state.arrayStates.map((function(e){return Object(M.jsx)(Xn.a,{value:e.idEstado,label:e.nombre,component:B.a},e.idEstado)}))}},{key:"updateState",value:function(e){this.setLoading(!0);var t=this.state.turnSelected;t.idEstado={idEstado:e},this.setState({turnSelected:t}),this.updateTurn(t.idControlTurno,t)}},{key:"updateTurn",value:function(e,t){var a=this;Yn.updateTurn(e,t).then((function(e){le.b.success("Estado del turno "+a.state.turnSelected.noConsecutivo+" actualizado correctamente"),a.setLoading(!1)})).catch((function(e){le.b.error("Error"),a.setLoading(!1)}))}},{key:"onHandleFinalize",value:function(){this.setState({open:!0})}},{key:"handleCancel",value:function(e){this.setState({open:!1})}},{key:"handleOk",value:function(e){this.setLoading(!0),this.completeTurn(this.state.turnSelected.idControlTurno)}},{key:"completeTurn",value:function(e){var t=this;Yn.completeTurn(e).then((function(e){t.setLoading(!1),t.handleCancel(),t.setState({turnSelected:null}),t.clientRef.sendMessage("/app/hello",JSON.stringify(e.data)),le.b.success("Turno finalizado con \xe9xito")})).catch((function(e){le.b.error("Error"),t.setLoading(!1)}))}},{key:"setLoading",value:function(e){this.setState({isLoading:e})}},{key:"increaseCalled",value:function(){var e=this;this.setLoading(!0),Yn.increaseCalled(this.state.turnSelected.controlTurnoDetalleSet[0].idControlTurnoDetalle).then((function(t){e.setState({turnDetailSelected:t.data,called:t.data.noSolicitudes}),e.sendMessage({consecutivo:e.state.turnSelected.noConsecutivo,estacion:JSON.parse(e.state.estacion).nombre}),e.setLoading(!1)})).catch((function(t){le.b.error("Error al actualizar llamado"),e.setLoading(!1)}))}},{key:"loadSelectStationFromApi",value:function(){var e=this;Yn.findOccupiedStation().then((function(e){})).catch((function(t){e.props.destroyStationAttended()}))}},{key:"render",value:function(){var e=this,t=[null!==this.state.turnSelected&&Object(M.jsx)(B.a,{startIcon:Object(M.jsx)(Zn.a,{badgeContent:this.state.called,invisible:0===this.state.called,color:"primary",children:Object(M.jsx)(li.a,{})}),onClick:function(t){return e.increaseCalled()},children:"Rellamar turno"},"one"),null!==this.state.turnSelected&&Object(M.jsx)(B.a,{startIcon:Object(M.jsx)(ci.a,{}),onClick:function(t){return e.onHandleFinalize()},children:"Finalizar turno"},"two"),Object(M.jsx)(B.a,{startIcon:Object(M.jsx)(ri.a,{}),onClick:function(t){return e.onClickNext()},children:"Siguiente turno"},"three")];return Object(M.jsxs)(xe.a,{maxWidth:"xl",children:[Object(M.jsx)(ni,{title:JSON.parse(this.state.estacion).nombre,vacateStation:this.vacateStation}),Object(M.jsxs)(ze.a,{container:!0,spacing:2,children:[Object(M.jsxs)(ze.a,{item:!0,xs:12,md:12,children:[Object(M.jsx)(k.a,{variant:"h3",gutterBottom:!0,style:{margin:5},children:null!==this.state.turnSelected?"Atendiendo: "+this.state.turnSelected.noConsecutivo:"Sin turno en proceso"}),Object(M.jsx)(y.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{m:1}},children:Object(M.jsx)(Kn.a,{size:"large","aria-label":"large button group",children:t})})]}),null!==this.state.turnSelected&&!this.state.isLoading&&Object(M.jsxs)(ze.a,{item:!0,xs:12,md:6,children:[Object(M.jsx)(k.a,{variant:"h3",gutterBottom:!0,style:{margin:5},children:"Estado del turno"}),Object(M.jsx)(y.a,{sx:{width:500},children:Object(M.jsx)(ei.a,{showLabels:!0,value:this.state.SelectedState,onChange:function(t,a){e.setState({SelectedState:a}),e.updateState(a)},children:this.renderStates()})})]})]}),Object(M.jsxs)(Qt.a,{sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:500}},maxWidth:"md",open:this.state.open,children:[Object(M.jsxs)(Zt.a,{children:["\xbfFinalizar atenci\xf3n del turno ",null!==this.state.turnSelected?this.state.turnSelected.noConsecutivo:"","?"]}),Object(M.jsx)($t.a,{dividers:!0,children:Object(M.jsx)(k.a,{variant:"body2",gutterBottom:!0,children:"El turno ser\xe1 finalizado y no se puede revertir."})}),Object(M.jsxs)(Gt.a,{children:[Object(M.jsx)(B.a,{autoFocus:!0,onClick:this.handleCancel.bind(this),children:"Cancel"}),Object(M.jsx)(B.a,{onClick:this.handleOk.bind(this),children:"Ok"})]})]}),this.state.isLoading&&Object(M.jsx)(ti.a,{}),Object(M.jsx)(ui.a,{url:hi,topics:["/topic/greetings"],onMessage:function(e){console.log(e)},ref:function(t){e.clientRef=t},proxy:{"/ws/**":{target:"http://localhost:8080/test-socket",changeOrigin:!0}},debug:!1}),Object(M.jsx)(ui.a,{url:hi,topics:["/topic/greetings"],onMessage:function(e){console.log(e)},ref:function(t){e.clientRefTurn=t},proxy:{"/ws/**":{target:"http://localhost:8080/test-socket",changeOrigin:!0}},debug:!1})]})}}]),a}(n.Component),ji=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).useStyles=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),n.state={isLoading:!1},n}return Object(ae.a)(a,[{key:"render",value:function(){var e=this.useStyles;return Object(M.jsx)(Et.Consumer,{children:function(t){var a=t.stationAttended,n=t.destroyStationAttended;return Object(M.jsx)(ve,{className:e.root,title:"Atenci\xf3n de turnos",children:Object(M.jsxs)(y.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",marginTop:"15px",children:[(null===a||void 0===a)&&Object(M.jsx)($n,{}),null!==a&&void 0!==a&&Object(M.jsx)(bi,{estacion:a,destroyStationAttended:n})]})})}})}}]),a}(n.Component),mi=Object(d.a)((function(e){return{root:{},avatar:{marginRight:e.spacing(2)}}})),pi=function(e){var t=e.className,a=e.data,n=Object(T.a)(e,["className","data"]),i=mi();return Object(M.jsx)(Oe.a,Object(_.a)(Object(_.a)({className:Object(A.a)(i.root,t)},n),{},{children:Object(M.jsx)("div",{style:{minHeight:500,height:500,width:"100%"},children:Object(M.jsx)(ye.a,{rows:a,columns:[{field:"consecutivo",headerName:"Turno",minWidth:300,flex:3},{field:"estacion",headerName:"Ventanilla",minWidth:300,flex:3}],pagination:!1,hideFooterPagination:!0})})}))},gi=se.getApiUrl(),xi=new(function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,[{key:"findTurnToShow",value:function(){return ie.a.get("".concat(gi,"/turno/show"))}}]),e}()),fi="http://74.208.187.67:8080/Turnos/test-socket",vi=function(e){Object(pe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).useStyles=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),n.sendMessage=function(e){n.clientRef.sendMessage("/app/hello",JSON.stringify(e))},n.onMessageReceived=function(e){console.log(e),n.setState({message:e})},n.onMessageReceivedTurn=function(e){console.log(e);var t="Turno "+e.consecutivo+" en "+e.estacion;console.log(t),new Promise((function(e,a){n.speakMsg(t),n.onHandleOpenModal(t),setTimeout((function(){e("\xa1\xc9xito!")}),3e3)})).then((function(e){console.log("\xa1S\xed! "+e),n.setState({open:!1})}))},n.onConnected=function(){console.log("Connected!!")},n.speakMsg=function(e){le.b.info(e,{position:"top-center",autoClose:3e3});var t,a=["es-MX","es-US","es-ES","es_US","es_ES"],n=speechSynthesis.getVoices();t=n.findIndex((function(e){return a.includes(e.lang)})),console.log({vocesDisponibles:n});var i=e,r=new SpeechSynthesisUtterance;r.voice=n[t],r.volume=1,r.rate=1,r.text=i,r.pitch=.7,speechSynthesis.speak(r)},n.state={isLoading:!1,message:[],open:!1,msg:""},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){if(!1 in window)return alert("Lo siento, tu navegador no soporta esta tecnolog\xeda");this.loadturnToShow()}},{key:"loadturnToShow",value:function(){var e=this;xi.findTurnToShow().then((function(t){e.setState({message:t.data})})).catch((function(e){console.log(e)}))}},{key:"onHandleOpenModal",value:function(e){this.setState({open:!0,msg:e})}},{key:"render",value:function(){var e=this,t=this.useStyles;return Object(M.jsx)(Et.Consumer,{children:function(a){a.stationAttended,a.destroyStationAttended;return Object(M.jsxs)(ve,{className:t.root,title:"Lista de turnos",children:[Object(M.jsx)(y.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",marginTop:"15px",children:Object(M.jsx)(xe.a,{maxWidth:!1,children:Object(M.jsxs)(ze.a,{container:!0,spacing:2,children:[Object(M.jsx)(ze.a,{item:!0,xs:6,md:6,children:Object(M.jsx)(pi,{data:e.state.message})}),Object(M.jsx)(ze.a,{item:!0,xs:6,md:6,children:Object(M.jsxs)("video",{controls:!0,autoPlay:!0,loop:!0,width:"100%",muted:!0,children:[Object(M.jsx)("source",{src:"/turnos/assets/video/mov_bbb.mp4",type:"video/mp4"}),Object(M.jsxs)("p",{children:["Su navegador no soporta video HTML5. Aqu\xed hay un ",Object(M.jsx)("a",{href:"rabbit320.mp4",children:"enlace al video"}),"."]})]})})]})})}),Object(M.jsx)(Qt.a,{sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:500}},maxWidth:"md",open:e.state.open,children:Object(M.jsx)($t.a,{children:Object(M.jsx)(k.a,{variant:"h1",component:"div",gutterBottom:!0,children:e.state.msg})})}),Object(M.jsx)(ui.a,{url:fi,topics:["/topic/greetings"],onMessage:function(t){e.onMessageReceived(t)},ref:function(t){e.clientRef=t},proxy:{"/ws/**":{target:"http://74.208.187.67:8080/Turnos/test-socket",changeOrigin:!0}},debug:!1}),Object(M.jsx)(ui.a,{url:fi,topics:["/topic/turn"],onMessage:function(t){e.onMessageReceivedTurn(t)},ref:function(t){e.clientRef=t},proxy:{"/ws/**":{target:"http://74.208.187.67:8080/Turnos/test-socket",changeOrigin:!0}},debug:!1})]})}})}}]),a}(n.Component);se.setupAxiosInterceptors(se.createJWTToken(se.getTokenUser()));var Oi=function(){return!!se.isUserLoggedIn()},yi=[{path:"turnos/app/",element:Object(M.jsx)(ue,{}),children:[{path:"users",element:Oi()?Object(M.jsx)(qe,{}):Object(M.jsx)(s.a,{to:"/turnos/login"})},{path:"dashboard",element:Oi()?Object(M.jsx)(St,{}):Object(M.jsx)(s.a,{to:"/turnos/login"})},{path:"usuario",element:Oi()?Object(M.jsx)(xa,{}):Object(M.jsx)(s.a,{to:"/turnos/login"})},{path:"stations",element:Oi()?Object(M.jsx)(Ia,{}):Object(M.jsx)(s.a,{to:"/turnos/login"})},{path:"station",element:Oi()?Object(M.jsx)(Ba,{}):Object(M.jsx)(s.a,{to:"/turnos/login"})},{path:"categories",element:Oi()?Object(M.jsx)(qa,{}):Object(M.jsx)(s.a,{to:"/turnos/login"})},{path:"category",element:Oi()?Object(M.jsx)(un,{}):Object(M.jsx)(s.a,{to:"/turnos/login"})},{path:"services",element:Oi()?Object(M.jsx)(On,{}):Object(M.jsx)(s.a,{to:"/turnos/login"})},{path:"service",element:Oi()?Object(M.jsx)(Sn,{}):Object(M.jsx)(s.a,{to:"/turnos/login"})},{path:"atencion",element:Oi()?Object(M.jsx)(ji,{}):Object(M.jsx)(s.a,{to:"/turnos/login"})},{path:"/logout",element:Object(M.jsx)(zt,{})},{path:"*",element:Object(M.jsx)(s.a,{to:"/turnos/404"})}]},{path:"turnos/",element:Object(M.jsx)(me,{}),children:[{path:"login",element:Object(M.jsx)(Wt,{})},{path:"register",element:Object(M.jsx)(Ut,{})},{path:"404",element:Object(M.jsx)(Mt,{})},{path:"/",element:Object(M.jsx)(Wt,{})},{path:"*",element:Object(M.jsx)(s.a,{to:"/turnos/404"})},{path:"/kiosko",element:Object(M.jsx)(qn,{})},{path:"/tv",element:Object(M.jsx)(vi,{})}]}],Si=function(){var e=Object(s.i)(yi);return Object(M.jsx)(Et.Provider,{children:Object(M.jsx)(Et.Consumer,{children:function(t){t.isAuth;return Object(M.jsxs)(l.a,{theme:f,children:[Object(M.jsx)(b,{}),e,Object(M.jsx)(le.a,{pauseOnFocusLoss:!1})]})}})})};o.a.render(Object(M.jsx)(c.a,{children:Object(M.jsx)(Si,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[624,1,2]]]);
//# sourceMappingURL=main.7fa9e721.chunk.js.map